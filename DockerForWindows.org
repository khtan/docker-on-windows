* meta
** startups
//		#+STARTUP: hidestars	
#+SEQ_TODO: TODO(t!) START(s!) STUCK(k!) WAIT(w!) | DONE(d!) CANCEL(c!) DEFER(r!) ANSWER(n!)
#+PROPERTY: imp_ALL high medium low
#+PROPERTY: urg_ALL immediate shortterm longterm
#+PROPERTY: loc_ALL home office
#+COLUMNS: %imp %urg %loc
* [[F:\ebooks\lib-sw\sw\virtualization\Docker\DockerForWindows\DockerOnWindows.2ed.2019.pdf][Docker For Windows 2ed 2019]] [[F:\ebooks\lib-sw\sw\virtualization\Docker\DockerForWindows\DockerOnWindows.2ed.2019.toc.pdf][toc]] [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition][code]]
** meta
  Elton created weekly contents for docker in his blog, then turned them into his book
  See the series at https://blog.sixeyed.com/tag/weekly-dockerfile/
https://github.com/sixeyed/docker-on-windows/tree/second-edition

[[https://www.manning.com/books/learn-kubernetes-in-a-month-of-lunches?query=kubernetes%20in%20a%20month][manning: meap]]
[[https://www.youtube.com/playlist?list=PLXl_isu8qxvmDOAnUkG5x16LzBzGzY_Ww][youtube: learn docker in a month series]]
   [[https://www.youtube.com/watch?v=zvjr8gmZjkE&list=PLXl_isu8qxvmDOAnUkG5x16LzBzGzY_Ww&index=11][diamol 11: understanding orchestation - swarm and kubernetes]]

 [2020-12-17 Thu 12:31]
   Realized that Docker has changed a lot in last year, but book is still at 2nd edition
*** Q: Hope u can comment on this article : https://boxboat.com/2019/12/10/migrate-docker-swarm-to-kubernetes/
I noticed that yr next book is not about Swarm, but Kubernetes. Does that jive with the above report?
** weekly-dockerfile blog
[[https://blog.sixeyed.com/windows-weekly-dockerfile-1/][#1: windows weeklly dockerfile]]
[[https://blog.sixeyed.com/windows-weekly-dockerfile-2/][#2: ch01-az]]
[[https://blog.sixeyed.com/weekly-windows-dockerfile-3/][#3: ch02-powershell-env]]
[[https://blog.sixeyed.com/weekly-windows-dockerfile-4/][#4: ch02-dotnet-helloworld]]
#5
#6
#7
#8
#9: container filesystem, part 2
#10: docker volumes
#11: stateful asp.net core apps
#12: nerddinner
#13: iis logging
#14: env variables
[[https://blog.sixeyed.com/windows-weekly-dockerfile-15-healthchecks/][#15: healthchecks]]
[[https://blog.sixeyed.com/windows-weekly-dockerfile-16-sql-server/][#16: sql server]]
[[https://blog.sixeyed.com/windows-weekly-dockerfile-17-connecting-containers/][#17: connecting to db containers]]
[[https://blog.sixeyed.com/windows-weekly-dockerfile-18-splitting-ui/][#18: splitting web uis]]
[[https://blog.sixeyed.com/windows-weekly-dockerfile-19-integrating-ui-containers/][#19: integrating ui containers]]
[[https://blog.sixeyed.com/windows-weekly-dockerfile-20-running-your-own-registry/][#20: running your own registry]]
[[https://blog.sixeyed.com/windows-weekly-dockerfile-21-nerd-dinner/][#21: back to nerd dinner]]


[[https://blog.sixeyed.com/windows-dockerfile-24/][#24: building distributed .net apps]]
[[
https://blog.sixeyed.com/windows-dockerfile-25/][#25: self-service analytics for legacy .net apps]]
[[https://blog.sixeyed.com/windows-dockerfile-26/][#26: managing and upgrading apps with docker compose]]
** NerdDinner
[[https://docs.microsoft.com/en-us/aspnet/mvc/overview/older-versions-1/nerddinner/introducing-the-nerddinner-tutorial][NerdDinner tutorial]]
[[https://archive.codeplex.com/?p=nerddinner][CodePlex Archive: NerdDinner]]
[[https://github.com/aspnet/NerdDinner][GitHub: NerdDinner using ASP Core]]
[[https://weblogs.asp.net/scottgu/free-asp-net-mvc-nerddinner-tutorial-now-in-html][Free ASP.NET MVC NerdDinner Tutorial in HTML]]
** [[F:\ebooks\lib-sw\sw\virtualization\Docker\ProfessionalASP.NETMVC2.GallowayEtAl.Wrox.2010.pdf][Professional ASP.NET MVC2 2010 Wrox]]

code: https://media.wiley.com/product_ancillary/88/04706431/DOWNLOAD/9780470643181%20entire%20book%20code.zipp
** contents 
*** [[part1]] [[part2]] [[part3]]
*** section 1 : understanding docker and windows containers
**** ch1 Getting Started with Docker on Windows [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch01\build.org][build.org]]
***** docker on desktop
****** baseline
******* air
******** air : has docker, no WSL
********* [[./images/DockerDesktop.air.png][Docker Desktop dialog]]
  Currently my Docker Desktop Community dialog shows 
  Version: 2.1.05 (40693)
  Channel: stable
  Engine: 19.03.5
  Notary: 0.6.1
  Compose: 1.24.1
  Credential Helpers : 0.6.3
  Kubernetes: 1.14.8
  Machine: 0.16.2

 docker --version only gives one version. 
 What is the commmand line that would give more these versions? docker version
 Yet pieces like Notary, Compose etc do not give out their version.

********* c:\cprojects\github>docker --version
 docker --version
 Docker version 19.03.5, build 633a0ea
********* c:\cprojects\github>docker version
 docker version
 Client: Docker Engine - Community
  Version:           19.03.5
  API version:       1.40
  Go version:        go1.12.12
  Git commit:        633a0ea
  Built:             Wed Nov 13 07:22:37 2019
  OS/Arch:           windows/amd64
  Experimental:      true

 Server: Docker Engine - Community
  Engine:
   Version:          19.03.5
   API version:      1.40 (minimum version 1.24)
   Go version:       go1.12.12
   Git commit:       633a0ea
   Built:            Wed Nov 13 07:36:50 2019
   OS/Arch:          windows/amd64
   Experimental:     true
******** DONE update to WSL2
         CLOSED: [2021-01-24 Sun 13:14]
         - State "DONE"       from              [2021-01-24 Sun 13:14]
********* docker version
 Client: Docker Engine - Community
  Cloud integration: 1.0.7
  Version:           20.10.2
  API version:       1.41
  Go version:        go1.13.15
  Git commit:        2291f61
  Built:             Mon Dec 28 16:14:16 2020
  OS/Arch:           windows/amd64
  Context:           default
  Experimental:      true

 Server: Docker Engine - Community
  Engine:
   Version:          20.10.2
   API version:      1.41 (minimum version 1.24)
   Go version:       go1.13.15
   Git commit:       8891c58
   Built:            Mon Dec 28 16:26:48 2020
   OS/Arch:          windows/amd64
   Experimental:     false
********* [[./images/DockerDesktop.air.24Jan2021.png][DockerDesktop.air.24Jan2021.png]]
******* kwee1: has docker, WSL
******** [[./images/DockerDesktop.kwee1.png][Docker Desktop dialog]]
 Version: 3.0.0 (50684)
 < Channel: missing> 
 Engine: 20.10.0
 Notary: 0.6.1
 Compose: 1.27.4
 Credential Helpers : 0.6.3
 Kubernetes: 1.19.3
 < Machine: missing>
 Snyk: v1.432.0
******** docker version
C:\WINDOWS\system32>docker version
Client: Docker Engine - Community
 Cloud integration: 1.0.4
 Version:           20.10.0
 API version:       1.41
 Go version:        go1.13.15
 Git commit:        7287ab3
 Built:             Tue Dec  8 18:55:31 2020
 OS/Arch:           windows/amd64
 Context:           default
 Experimental:      true

Server: Docker Engine - Community
 Engine:
  Version:          20.10.0
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.13.15
  Git commit:       eeddea2
  Built:            Tue Dec  8 18:58:04 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          v1.4.3
  GitCommit:        269548fa27e0089a8b8278fc4fc781d7f65a939b
 runc:
  Version:          1.0.0-rc92
  GitCommit:        ff819c7e9184c13b7c2607fe6c30ae19403a7aff
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0
******* rooibos:
******** Linux : there is no equivalent Docker Desktop, only Mac and Windows
This tells me we don't really need it. 
******** (base) tankh@rooibos:~$ docker version
Client:
 Version:           19.03.6
 API version:       1.40
 Go version:        go1.12.17
 Git commit:        369ce74a3c
 Built:             Wed Oct 14 19:00:27 2020
 OS/Arch:           linux/amd64
 Experimental:      false

Server:
 Engine:
  Version:          19.03.6
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.12.17
  Git commit:       369ce74a3c
  Built:            Wed Oct 14 16:52:50 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.3.3-0ubuntu1~18.04.2
  GitCommit:        
 runc:
  Version:          spec: 1.0.1-dev
  GitCommit:        
 docker-init:
  Version:          0.18.0
  GitCommit:        

****** hosting
Windows Server 2019 : container process actually runs on the server 
Windows 10 : container process runs in a light VM called hyper-v containers 
   This might no longer be true

This leads to Windows Server container vs Hyper-V container
   Hyper-V has slight performance hit
****** winver brings up a dialog that shows windows version
This is an example of a useless/hard to automate app. Much simpler to print out the versions.
****** windows versions
If using Windows Server containers, the version of Windows on your server and containers must match 
   Not sure if this is still a requirement 
If using Hyper-V, containers can be built for a different version of Windows
****** windows licensing
Licensing is done at the host level, not container.
Hyper-V containers have separate licensing => On Win10, u can run multiple containers but not for production deployment
   In production, hyper-v containers require a Windows Server Datacenter license to run without individual licenses
****** key docker concepts
image
   run containers from images
registry
container
orchestrator 
****** docker engine and docker cli 
docker (engine) runs as a background windows service. 
It exposes a REST API and the cli uses that apisyouwonthate
Because the REST API is public, other tools can also interface with Docker.
Eg Portainer and UCP

This API can alos be remotely accessible, ie u can manage a Docker host running in the cloud.

***** skip: docker on server
The section is called 'Docker Engine' where u install Docker Engine only, not client on WinServer 2019 Core 
This requires access to a WinServer 2019 machine

***** skip: docker in an azure VM
Example requires a DevTest lab account.
MS DevTest lab setup is free but machine provisioned will be billed
With Azure free account get 12 mths free access to VM plust $200 credit for 30 days
Suspect free access to VM does not include provisioning the VM

**** ch2 Packaging and Running Apps as Docker Containers
***** running a container from an image
       docker container run == docker container create + docker container start
       [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch02\1-ch02-powershell-env\powershell-env.org][1-ch02-powershell-env/powershell-env.org]]

****** connecting to an interactive container ( -i )
      containers can be given names.
      The names can be used in certain operations such as docker rm <container name or id> or docker exec <name>
      List ids of containers with docker ps -a -q

      Documentation shows the difference between run and start
         docker run IMAGE
         docker start CONTAINER

      Any command that takes CONTAINER can take container name. But docker run takes an IMAGE, so it cannot use the container name.

      Let's say that dockeronwindows/ch02-powershell-env:2e image ran the container called 'agitated_hodgkin'
      We can then rerun the container with 
         docker start agitated_hodgkin

         However, we do not see any output.
         docker start -i agitated_hodgkin will show the output and the process will still exit.

****** keeping a process running in a background container ( with -d|--detach )
***** building a docker image
       [[file:c:/cprojects/pp/virtualization/docker/Docker-on-Windows-Second-Edition/ch02/1-ch02-powershell-env/Dockerfile::FROM mcr.microsoft.com/windows/servercore:ltsc2019][Dockerfile]]
       [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch02\2-ch02-dotnet-helloworld\helloworld.org][2-ch02-dotnet-helloworld\helloworld.org]]
****** understanding dockerfiles
***** packaging your own application
****** compiling during build
use a base image to contain the application platform and build tools
Dockerfile : copy source code into image and compile the app
+ anyone can build the image without having the application platform installed locally
+ tooling is bundled with the image, so easy to debug build and run issues
[[file:ch02/2-ch02-dotnet-helloworld/Dockerfile::FROM microsoft/dotnet:2.2-sdk-nanoserver-1809][Dockerfile]]

+ used for languages like .net core, Go, Node.js whose tooling is easy to add to a base image
- image is larger than required due to the build tools
****** compiling before build
by compiling first, and then copying only the built application, more storage is saved
[[file:ch02/2-ch02-dotnet-helloworld/Dockerfile.slim::FROM microsoft/dotnet:2.2-runtime-nanoserver-1809][Dockerfile.slim]]
[[file:ch02/2-ch02-dotnet-helloworld/build.ps1::dotnet restore src; dotnet publish src][build.ps1]]

****** multi-stage compiling
[[file:ch02/2-ch02-dotnet-helloworld/Dockerfile.multistage::# build stage][Dockerfile.multistage]]
****** main Dockerfile
       [[file:ch02/3-ch02-static-website/Dockerfile::# escape=`][3-ch02-static-website/Dockerfile]]
       [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch02\3-ch02-static-website\static-website.org][3-ch02-static-website\static-website.org]]
       docker container port <id> lists the ports published on host

****** temporary containers and image state
       [[file:ch02/4-ch02-fs-1/Dockerfile::# escape=`][4-ch02-fs-1/Dockerfile]]
       [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch02\4-ch02-fs-1\fs.org][4-ch02-fs-1\fs.org]]
       [[file:ch02/5-ch02-fs-2/Dockerfile::FROM dockeronwindows/ch02-fs-1:2e][5-ch02-fs-2/Dockerfile]]
****** DONE seque: how to find containers
       CLOSED: [2020-12-24 Thu 09:31]
        - State "DONE"       from              [2020-12-24 Thu 09:31]
Suppose there is a container named c1. How can we list it? Using the Unix analog, it would be 
docker container ls c1 but ls accepts no argument.

The answer is docker container inspect <id|name>
and           docker image inspect <id|name>
******* It seems that docker container inspect, docker image inspect and docker inspect are different
******** c:\cprojects\github>docker container inspect --help
 docker container inspect --help

 Usage:	docker container inspect [OPTIONS] CONTAINER [CONTAINER...]

 Display detailed information on one or more containers

 Options:
   -f, --format string   Format the output using the given Go template
   -s, --size            Display total file sizes
******** c:\cprojects\github>docker image inspect --help
 docker image inspect --help

 Usage:	docker image inspect [OPTIONS] IMAGE [IMAGE...]

 Display detailed information on one or more images

 Options:
   -f, --format string   Format the output using the given Go template
******** c:\cprojects\github>docker inspect --help
 docker inspect --help

 Usage:	docker inspect [OPTIONS] NAME|ID [NAME|ID...]

 Return low-level information on Docker objects

 Options:
   -f, --format string   Format the output using the given Go template
   -s, --size            Display total file sizes if the type is container
       --type string     Return JSON for specified type
******* Example
******** transcript to get container id, container name, image id, image name
c:\cprojects\github>docker image ls
docker/whalesay                              latest                                   6b362a9f73eb        5 years ago         289MB
c:\cprojects\github>docker container ls -a
docker container ls -a
CONTAINER ID        IMAGE                                    COMMAND                   CREATED             STATUS                            PORTS               NAMES
075ef59593c7        dockeronwindows/ch02-powershell-env:2e   "powershell.exe C:\\p…"   3 days ago          Exited (0) 3 days ago                                 ch02-powershell
dfeec17e3181        dockeronwindows/ch02-powershell-env:2e   "powershell.exe C:\\p…"   3 days ago          Exited (0) 3 days ago                                 agitated_hodgkin
******** Set shell variables
set cid=dfeec17e3181
set cname=agitated_hodgkin
set iid=6b362a9f73eb
set iname=docker/whalesay
******** Confirmed the following
docker container inspect <container id| container name>
docker image     inspect <image id| image name>
docker           inspect <image id| image name| container id| container name>

But how to tell if something is a container or image?

***** working with data in docker images and containers
****** data in layers and the virtual C drive
****** sharing data between containers with volumes
volumes are units of storage
they have a separate lifecycle to containers
they can be created independently and mounted inside one or more containers
in Windows, volume directories need to be empty
volumes need to be defined on a disk that exists in the image
   for Windows base images, this is c: drive

        [[file:ch02/6-ch02-volumes/Dockerfile::FROM mcr.microsoft.com/windows/nanoserver:1809][6-ch02-volumes/Dockerfile]]
        [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch02\6-ch02-volumes\volumes.org][6-ch02-volumes\volumes.org]]

****** sharing data betwen container and host with volumes
******* mounting volumes from host directoriies with --volume
****** using volumes for configuration state
       [[file:ch02/7-ch02-hitcount-website/Dockerfile::# escape=`][7-ch02-hitcount-website/Dockerfile]]
       [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch02\7-ch02-hitcount-website\hitcount-website.org][7-ch02-hitcount-website\hitcount-website.org]]
***** packaging a traditional asp.net web app as docker image
      Windows Server Core base image has much of the full server functionality without the UI
      It is a suitable base for any existng Windows app but has a large footprint 2G
      This compares with Nano Server 100M and Alpine Linux 2M
       [[C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch02\8-ch02-nerd-dinner\nerd-dinner.org][8-ch02-nerd-dinner\nerd-dinner.org]]
***** 8. nerddinner
Incidental sizes of docker images
| windows server 2019 image | 2G compressed |
| nano server               | 100 Mb        |
| alpine linux              | 2 Mb          | 

[[file:ch02/8-ch02-nerd-dinner/Dockerfile::# escape=`][8-ch02-nerd-dinner/Dockerfile]]

**** ch3 Developing Dockerized .NET Framework and .NET Core Apps
***** source folders
There are 8 folders but no indication as to ordering. By perusing Ch3, the ordering I believe the book takes
is :
 1-ch03-iis-log-watcher
 2-ch03-aspnet-config
 3-ch03-iis-environment-variables
 4-ch03-iis-healthcheck
 5-ch03-sql-server
 6-ch03-nerd-dinner-db
 7-ch03-nerd-dinner-web
 8-ch03-nerd-dinner-homepage

***** building good citizens for Docker
****** notes
Docker uses console to communicate between app and container runime
The app should only do only one thing
If Docker runs a script, it only monitors the last process started
All .NET core apps run as console apps
****** hosting IIS apps in docker
******* configuring IIS for docker-friendly logging
         [[file:ch03/1-ch03-iis-log-watcher/Dockerfile::# escape=`][1-ch03-iis-log-watcher/Dockerfile]]
         [[file:ch03/2-ch03-aspnet-config/config/appSettings.config::<appSettings>][config/appSettings.config]]
         [[file:ch03/2-ch03-aspnet-config/config/connectionStrings.config::<add name="db1" connectionString="server=db1, user=admin, password=insecure"/>][config/connectionStrings.config]]
         [[file:ch03/2-ch03-aspnet-config/prod-config/appSettings.config::<appSettings>][prod/appSettings.config]]
         [[file:ch03/2-ch03-aspnet-config/prod-config/connectionStrings.config::<connectionStrings>][prod/connectionStrings.config]]
******** docker image build -t dockeronwindows/ch03-iis-log-watcher:2e ./1-ch03-iis-log-watcher
Sending build context to Docker daemon  3.072kB
Step 1/5 : FROM mcr.microsoft.com/windows/servercore/iis:windowsservercore-ltsc2019
 ---> 7357c009d9e4
Step 2/5 : SHELL ["powershell", "-Command", "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue';"]
 ---> Running in 24ad6ee0cbab
Removing intermediate container 24ad6ee0cbab
 ---> bf25c750c1cc
Step 3/5 : RUN Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log' -n 'centralLogFileMode' -v 'CentralW3C';     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'truncateSize' -v 4294967295;     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'period' -v 'MaxSize';     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'directory' -v 'c:\iislog'
 ---> Running in cbb164c73953
Removing intermediate container cbb164c73953
 ---> 60a8058c70c2
Step 4/5 : ENTRYPOINT ["powershell"]
 ---> Running in badba637663c
Removing intermediate container badba637663c
 ---> bd37704c4527
Step 5/5 : CMD Start-Service W3SVC;     Invoke-WebRequest http://localhost -UseBasicParsing | Out-Null;     netsh http flush logbuffer | Out-Null;     Get-Content -path 'c:\iislog\W3SVC\u_extend1.log' -Tail 1 -Wait
 ---> [Warning] Shell-form ENTRYPOINT and exec-form CMD may have unexpected results
 ---> Running in 49c06f06bb8a
Removing intermediate container 49c06f06bb8a
 ---> 2c2acddb89d9
Successfully built 2c2acddb89d9
Successfully tagged dockeronwindows/ch03-iis-log-watcher:2e
******** docker container run -d -P --name log-watcher dockeronwindows/ch03-iis-log-watcher:2e
-P publish-all
******** docker container port log-watcher
docker container port log-watcher
80/tcp -> 0.0.0.0:12846
******** set browser to http://localhost:12846
Will see IISHOME PAGE
******** c:\>docker container logs log-watcher
docker container logs log-watcher
2020-12-25 18:34:27 W3SVC1 ::1 GET / - 80 - ::1 Mozilla/5.0+(Windows+NT;+Windows+NT+10.0;+en-US)+WindowsPowerShell/5.1.17763.592 - 200 0 0 214
******** c:\>docker container logs log-watcher
docker container logs log-watcher
2020-12-25 18:34:27 W3SVC1 ::1 GET / - 80 - ::1 Mozilla/5.0+(Windows+NT;+Windows+NT+10.0;+en-US)+WindowsPowerShell/5.1.17763.592 - 200 0 0 214
2020-12-25 18:36:32 W3SVC1 172.17.15.239 GET / - 80 - 192.168.1.8 Mozilla/5.0+(Windows+NT+10.0;+Win64;+x64)+AppleWebKit/537.36+(KHTML,+like+Gecko)+Chrome/87.0.4280.88+Safari/537.36 - 200 0 0 1
2020-12-25 18:36:32 W3SVC1 172.17.15.239 GET /iisstart.png - 80 - 192.168.1.8 Mozilla/5.0+(Windows+NT+10.0;+Win64;+x64)+AppleWebKit/537.36+(KHTML,+like+Gecko)+Chrome/87.0.4280.88+Safari/537.36 http://localhost:12846/ 200 0 0 10
2020-12-25 18:36:32 W3SVC1 172.17.15.239 GET /favicon.ico - 80 - 192.168.1.8 Mozilla/5.0+(Windows+NT+10.0;+Win64;+x64)+AppleWebKit/537.36+(KHTML,+like+Gecko)+Chrome/87.0.4280.88+Safari/537.36 http://localhost:12846/ 404 0 2 8
2020-12-25 18:37:01 W3SVC1 172.17.15.239 GET / - 80 - 192.168.1.8 Mozilla/5.0+(Windows+NT+10.0;+Win64;+x64)+AppleWebKit/537.36+(KHTML,+like+Gecko)+Chrome/87.0.4280.88+Safari/537.36 - 304 0 0 1
******** [[./images/ch03-iis-log-watcher.png][ch03-iis-log-watcher.png]]
****** managing app configuration
******* notes
Typically in development, we can use volume mounts and env variables
In production, config data should be stored in the cluster's secure database as Docker config objects or Docker secrets (ch7)
******* mounting config files in docker volumes
******** notes
Use a specific directory for configuration files so that you can overwrie them at runtime by mounting a Docker volume
[[file:ch03/2-ch03-aspnet-config/Dockerfile::# escape=`][2-ch03-aspnet-config/Dockerfile]]
******** docker image build -t dockeronwindows/ch03-aspnet-config:2e ./2-ch03-aspnet-config
Running in emacs shell does not display intermediate output properly, making it hard to monitor
So, rerun in powershell
******** PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03> docker image build -t dockeronwindows/ch03-aspnet-config:2e ./2-ch03-aspnet-config
Sending build context to Docker daemon  11.78kB
Step 1/4 : FROM mcr.microsoft.com/dotnet/framework/aspnet
latest: Pulling from dotnet/framework/aspnet
295f12394c4f: Pull complete
a459afba0e27: Pull complete
b86a186a8734: Pull complete
126d5b7621eb: Pull complete
5b308a47005b: Pull complete
1e7e456964a5: Pull complete
769599c44984: Pull complete
796cbf2e90c5: Pull complete
97636c980bc8: Pull complete
911c8bd83b09: Pull complete
6acfa0159247: Pull complete
Digest: sha256:d7adec80a9a43d801891458040018972ac006aeca2903cdc6369f69f54951b22
Status: Downloaded newer image for mcr.microsoft.com/dotnet/framework/aspnet:latest
 ---> c542ae7304cf
Step 2/4 : COPY Web.config C:\inetpub\wwwroot
 ---> 632e66028b8f
Step 3/4 : COPY config\*.config C:\inetpub\wwwroot\config\
 ---> e02996652f49
Step 4/4 : COPY default.aspx C:\inetpub\wwwroot
 ---> 9b69fbb7b990
Successfully built 9b69fbb7b990
Successfully tagged dockeronwindows/ch03-aspnet-config:2e

******** docker container run -d -P --name ch03-aspnet-config-default dockeronwindows/ch03-aspnet-config:2e
docker container run -d -P --name ch03-aspnet-config-default dockeronwindows/ch03-aspnet-config:2e
63bdc922deae70b8131dd1faae5c738890cd6640e6c16c51266071a211723332
******** docker container port ch03-aspnet-config
docker container port ch03-aspnet-config-default
80/tcp -> 0.0.0.0:15246
******** [[./images/ch03-aspnet-config-default.png][ch03-aspnet-config-default.png]]
******** seque: using powershell in emacs
Try running powershell in emacs shell and see if it works. Appears to be
******** seque: docker builds are slower due to rate limiting?
https://www.docker.com/blog/what-you-need-to-know-about-upcoming-docker-hub-rate-limiting/

******** PS: docker container run -d -P --name ch03-aspnet-config-prod -v $pwd\prod-config:C:\inetpub\wwwroot\config dockeronwindows/ch03-aspnet-config:2e
PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03\2-ch03-aspnet-config> docker container run -d -P --name ch03-aspnet-config-prod -v $pwd\prod-config:C:\inetpub\wwwroot\config dockeronwindows/ch03-aspnet-config:2e
docker container run -d -P --name ch03-aspnet-config-prod -v $pwd\prod-config:C:\inetpub\wwwroot\config dockeronwindows/ch03-aspnet-config:2e
d89a224a62edb9bc72e23d9181dee512144c85fd76698fb48b21046bd68c4cde
******** PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03\2-ch03-aspnet-config> docker container port ch03-aspnet-config-prod
docker container port ch03-aspnet-config-prod
80/tcp -> 0.0.0.0:15393
******** [[./images/ch03-aspnet-config-prod.png][ch03-aspnet-config-prod.png]]
******* promoting env variables
******** notes
Docker syntax: ENV key value
[[file:ch03/3-ch03-iis-environment-variables/Dockerfile::# escape=`][3-ch-3-iis-environment-variables/Dockerfile]]
[[file:ch03/3-ch03-iis-environment-variables/default.aspx::public string GetMachineVariables()][default.aspx]]
******** This is an example of running an image directly
******** docker container run --env ENV_01='Hello' --env ENV_02='World' mcr.microsoft.com/windows/nanoserver:1809 cmd /s /c echo %ENV_01% %ENV_02%
c:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03>docker container run --env ENV_01='Hello' --env ENV_02='World' mcr.microsoft.com/windows/nanoserver:1809 cmd /s /c echo %ENV_01% %ENV_02%
docker container run --env ENV_01='Hello' --env ENV_02='World' mcr.microsoft.com/windows/nanoserver:1809 cmd /s /c echo %ENV_01% %ENV_02%
'Hello' 'World'
******** docker image build -t dockeronwindows/ch03-iis-environment-variables:2e ./3-ch03-iis-environment-variables
PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03> docker image build -t dockeronwindows/ch03-iis-environment-variables:2e ./3-ch03-iis-environment-variables
Sending build context to Docker daemon  7.168kB
Step 1/8 : FROM mcr.microsoft.com/dotnet/framework/aspnet
 ---> c542ae7304cf
Step 2/8 : SHELL ["powershell", "-Command", "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue';"]
 ---> Using cache
 ---> ec9a07507260
Step 3/8 : RUN Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log' -n 'centralLogFileMode' -v 'CentralW3C';     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'truncateSize' -v 4294967295;     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'period' -v 'MaxSize';     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'directory' -v 'c:\iislog'
 ---> Using cache
 ---> c8505a507bf4
Step 4/8 : ENV A01_KEY A01 value
 ---> Running in 723745b4208d
Removing intermediate container 723745b4208d
 ---> f9eb9f4458f0
Step 5/8 : ENV A02_KEY="A02 value"     A03_KEY="A03 value"
 ---> Running in 2f8af31c5f16
Removing intermediate container 2f8af31c5f16
 ---> 90421e9229d3
Step 6/8 : ENTRYPOINT ["powershell"]
 ---> Running in 64f92ed520b6
Removing intermediate container 64f92ed520b6
 ---> 34d5218a991d
Step 7/8 : CMD Start-Process -NoNewWindow -FilePath C:\ServiceMonitor.exe -ArgumentList w3svc;     Invoke-WebRequest http://localhost -UseBasicParsing | Out-Null;     netsh http flush logbuffer | Out-Null;     Get-Content -path 'C:\iislog\W3SVC\u_extend1.log' -Tail 1 -Wait
 ---> [Warning] Shell-form ENTRYPOINT and exec-form CMD may have unexpected results
 ---> Running in 58bc27ff75bf
Removing intermediate container 58bc27ff75bf
 ---> 61109b134146
Step 8/8 : COPY default.aspx C:\inetpub\wwwroot
 ---> 35e42f8f7722
Successfully built 35e42f8f7722
Successfully tagged dockeronwindows/ch03-iis-environment-variables:2e
******** docker container run -d -P --name iis-env dockeronwindows/ch03-iis-environment-variables:2e 
c:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03>docker container run -d -P --name iis-env dockeronwindows/ch03-iis-environment-variables:2e 
docker container run -d -P --name iis-env dockeronwindows/ch03-iis-environment-variables:2e 
d312463fd8e7c990fd07d3aa5f0890f054e810fbf01be0b8d10e7da0b423eecd
******** docker container port iis-env
docker container port iis-env
80/tcp -> 0.0.0.0:24848
******** [[./images/ch03-iis-environment-variables.png][ch03-iis-environment-variables.png]]
******** docker container logs iis-env
c:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03>docker container logs iis-env
2020-12-26 00:18:18 W3SVC1 127.0.0.1 GET / - 80 - 127.0.0.1 Mozilla/5.0+(Windows+NT;+Windows+NT+10.0;+en-US)+WindowsPowerShell/5.1.19041.610 - 200 0 0 1228
2020-12-26 00:19:27 W3SVC1 172.17.1.152 GET / - 80 - 192.168.1.8 Mozilla/5.0+(Windows+NT+10.0;+Win64;+x64)+AppleWebKit/537.36+(KHTML,+like+Gecko)+Chrome/87.0.4280.88+Safari/537.36 - 200 0 0 4
2020-12-26 00:19:27 W3SVC1 172.17.1.152 GET /favicon.ico - 80 - 192.168.1.8 Mozilla/5.0+(Windows+NT+10.0;+Win64;+x64)+AppleWebKit/537.36+(KHTML,+like+Gecko)+Chrome/87.0.4280.88+Safari/537.36 http://localhost:24848/ 404 0 2 7
2020-12-26 00:21:50 W3SVC1 172.17.1.152 GET / - 80 - 192.168.1.8 Mozilla/5.0+(Windows+NT+10.0;+Win64;+x64)+AppleWebKit/537.36+(KHTML,+like+Gecko)+Chrome/87.0.4280.88+Safari/537.36 - 200 0 0 4

****** building docker images that monitor applications
******* notes
HEALTHCHECK <shell cmd that returns 0 for good, 1 for bad>
[[file:ch03/4-ch03-iis-healthcheck/Dockerfile::# escape=`][4-ch03-iis-healthcheck/Dockerfile]]
******* build: docker image build -t dockeronwindows/ch03-iis-healthcheck:2e ./4-ch03-iis-healthcheck
PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03> docker image build -t dockeronwindows/ch03-iis-healthcheck:2e ./4-ch03-iis-healthcheck
Sending build context to Docker daemon   38.4kB
Step 1/18 : FROM microsoft/dotnet-framework:4.7.2-sdk-windowsservercore-ltsc2019 AS builder
4.7.2-sdk-windowsservercore-ltsc2019: Pulling from microsoft/dotnet-framework
65014b3c3121: Already exists
12c8dbabfd62: Pull complete
d5db80da5db4: Pull complete
2618a47d5b0c: Pull complete
67fff9e8ea93: Pull complete
8c20187305c2: Pull complete
044f8f35d1ea: Pull complete
da2d76c7fb69: Pull complete
0945b4944cd2: Pull complete
64b91562e346: Pull complete
8778c3b25122: Pull complete
a0af495e7f1e: Pull complete
0717de0a1d25: Pull complete
Digest: sha256:03ea0e7adfe4d13f665e569baa093b1a3155a451151f0183cd7b54668e8fa025
Status: Downloaded newer image for microsoft/dotnet-framework:4.7.2-sdk-windowsservercore-ltsc2019
 ---> 1afb4e8593d8
Step 2/18 : WORKDIR C:\src
 ---> Running in f40b9e893a66
Removing intermediate container f40b9e893a66
 ---> d4aef99eeb34
Step 3/18 : COPY src\Healthcheck.WebApi.sln .
 ---> e23a87ca86e4
Step 4/18 : COPY src\Healthcheck.WebApi\Healthcheck.WebApi.csproj .\Healthcheck.WebApi\
 ---> 5ac0cf7e80d9
Step 5/18 : COPY src\Healthcheck.WebApi\packages.config .\Healthcheck.WebApi\
 ---> 43c2123c6928
Step 6/18 : RUN nuget restore Healthcheck.WebApi.sln
 ---> Running in d1c1563b6bb8
MSBuild auto-detection: using msbuild version '16.3.1.50202' from 'C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\bin'.
Restoring NuGet package Microsoft.AspNet.WebApi.5.2.6.
Restoring NuGet package Microsoft.AspNet.WebApi.Core.5.2.6.
Restoring NuGet package Microsoft.AspNet.WebApi.Client.5.2.6.
Restoring NuGet package Microsoft.AspNet.WebApi.WebHost.5.2.6.
Restoring NuGet package Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1.
Restoring NuGet package Microsoft.Net.Compilers.2.10.0.
Restoring NuGet package Newtonsoft.Json.11.0.2.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.core/5.2.6/microsoft.aspnet.webapi.core.5.2.6.nupkg
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.client/5.2.6/microsoft.aspnet.webapi.client.5.2.6.nupkg
  GET https://api.nuget.org/v3-flatcontainer/microsoft.codedom.providers.dotnetcompilerplatform/2.0.1/microsoft.codedom.providers.dotnetcompilerplatform.2.0.1.nupkg
  GET https://api.nuget.org/v3-flatcontainer/microsoft.net.compilers/2.10.0/microsoft.net.compilers.2.10.0.nupkg
  GET https://api.nuget.org/v3-flatcontainer/newtonsoft.json/11.0.2/newtonsoft.json.11.0.2.nupkg
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi/5.2.6/microsoft.aspnet.webapi.5.2.6.nupkg
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.webhost/5.2.6/microsoft.aspnet.webapi.webhost.5.2.6.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.core/5.2.6/microsoft.aspnet.webapi.core.5.2.6.nupkg 20ms
Installing Microsoft.AspNet.WebApi.Core 5.2.6.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.client/5.2.6/microsoft.aspnet.webapi.client.5.2.6.nupkg 105ms
Installing Microsoft.AspNet.WebApi.Client 5.2.6.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.codedom.providers.dotnetcompilerplatform/2.0.1/microsoft.codedom.providers.dotnetcompilerplatform.2.0.1.nupkg 296ms
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi/5.2.6/microsoft.aspnet.webapi.5.2.6.nupkg 296ms
Installing Microsoft.CodeDom.Providers.DotNetCompilerPlatform 2.0.1.
Installing Microsoft.AspNet.WebApi 5.2.6.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.net.compilers/2.10.0/microsoft.net.compilers.2.10.0.nupkg 297ms
  OK https://api.nuget.org/v3-flatcontainer/newtonsoft.json/11.0.2/newtonsoft.json.11.0.2.nupkg 298ms
Installing Microsoft.Net.Compilers 2.10.0.
Installing Newtonsoft.Json 11.0.2.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.webhost/5.2.6/microsoft.aspnet.webapi.webhost.5.2.6.nupkg 300ms
Installing Microsoft.AspNet.WebApi.WebHost 5.2.6.
Adding package 'Microsoft.AspNet.WebApi.5.2.6' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebApi.5.2.6' to folder 'C:\src\packages'
Adding package 'Microsoft.AspNet.WebApi.Core.5.2.6' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebApi.Core.5.2.6' to folder 'C:\src\packages'
Adding package 'Microsoft.AspNet.WebApi.WebHost.5.2.6' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebApi.WebHost.5.2.6' to folder 'C:\src\packages'
Adding package 'Microsoft.AspNet.WebApi.Client.5.2.6' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebApi.Client.5.2.6' to folder 'C:\src\packages'
Adding package 'Newtonsoft.Json.11.0.2' to folder 'C:\src\packages'
Added package 'Newtonsoft.Json.11.0.2' to folder 'C:\src\packages'
Adding package 'Microsoft.Net.Compilers.2.10.0' to folder 'C:\src\packages'
Added package 'Microsoft.Net.Compilers.2.10.0' to folder 'C:\src\packages'
Adding package 'Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1' to folder 'C:\src\packages'
Added package 'Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1' to folder 'C:\src\packages'

NuGet Config files used:
    C:\Users\ContainerAdministrator\AppData\Roaming\NuGet\NuGet.Config

Feeds used:
    https://api.nuget.org/v3/index.json

Installed:
    7 package(s) to packages.config projects
Removing intermediate container d1c1563b6bb8
 ---> 8398947c3945
Step 7/18 : COPY src C:\src
 ---> 6af31befd809
Step 8/18 : RUN msbuild Healthcheck.WebApi\Healthcheck.WebApi.csproj /p:OutputPath=c:\out /p:Configuration=Release
 ---> Running in df748f2a9f7b
Microsoft (R) Build Engine version 16.3.1+1def00d3d for .NET Framework
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 12/25/2020 5:11:28 PM.
Project "C:\src\Healthcheck.WebApi\Healthcheck.WebApi.csproj" on node 1 (default targets).
PrepareForBuild:
  Creating directory "c:\out\".
  Creating directory "obj\Release\".
CoreCompile:
  C:\src\packages\Microsoft.Net.Compilers.2.10.0\build\..\tools\csc.exe /noconfig /nowarn:1701,1702 /nostdlib+ /errorreport:prompt /warn:4 /define:TRACE /highentropyva+ /reference:C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\Microsoft.CSharp.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\mscorlib.dll" /reference:C:\src\packages\Newtonsoft.Json.11.0.2\lib\net45\Newtonsoft.Json.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.ComponentModel.DataAnnotations.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Configuration.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Core.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Data.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Drawing.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.EnterpriseServices.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Net.Http.dll" /reference:C:\src\packages\Microsoft.AspNet.WebApi.Client.5.2.6\lib\net45\System.Net.Http.Formatting.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.ApplicationServices.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.DynamicData.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.Entity.dll" /reference:C:\src\packages\Microsoft.AspNet.WebApi.Core.5.2.6\lib\net45\System.Web.Http.dll /reference:C:\src\packages\Microsoft.AspNet.WebApi.WebHost.5.2.6\lib\net45\System.Web.Http.WebHost.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.Services.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Xml.dll" /debug:pdbonly /optimize+ /out:obj\Release\Healthcheck.WebApi.dll /subsystemversion:6.00 /target:library /utf8output App_Start\WebApiConfig.cs Controllers\DiagnosticsController.cs Controllers\HealthToggleController.cs Global.asax.cs Models\DiagnosticsModel.cs Properties\AssemblyInfo.cs "C:\Users\ContainerAdministrator\AppData\Local\Temp\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs"
_CopyFilesMarkedCopyLocal:
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Client.5.2.6\lib\net45\System.Net.Http.Formatting.dll" to "c:\out\System.Net.Http.Formatting.dll".
  Copying file from "C:\src\packages\Newtonsoft.Json.11.0.2\lib\net45\Newtonsoft.Json.dll" to "c:\out\Newtonsoft.Json.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Core.5.2.6\lib\net45\System.Web.Http.dll" to "c:\out\System.Web.Http.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll" to "c:\out\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.WebHost.5.2.6\lib\net45\System.Web.Http.WebHost.dll" to "c:\out\System.Web.Http.WebHost.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.xml" to "c:\out\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.xml".
  Copying file from "C:\src\packages\Newtonsoft.Json.11.0.2\lib\net45\Newtonsoft.Json.xml" to "c:\out\Newtonsoft.Json.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Client.5.2.6\lib\net45\System.Net.Http.Formatting.xml" to "c:\out\System.Net.Http.Formatting.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Core.5.2.6\lib\net45\System.Web.Http.xml" to "c:\out\System.Web.Http.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.WebHost.5.2.6\lib\net45\System.Web.Http.WebHost.xml" to "c:\out\System.Web.Http.WebHost.xml".
  Creating "C:\src\Healthcheck.WebApi\obj\Release\Healthcheck.WebApi.csproj.CopyComplete" because "AlwaysCreate" was specified.
_CopyAppConfigFile:
  Copying file from "C:\src\Healthcheck.WebApi\Web.config" to "c:\out\Healthcheck.WebApi.dll.config".
CopyFilesToOutputDirectory:
  Copying file from "C:\src\Healthcheck.WebApi\obj\Release\Healthcheck.WebApi.dll" to "c:\out\Healthcheck.WebApi.dll".
  Healthcheck.WebApi -> c:\out\Healthcheck.WebApi.dll
  Copying file from "C:\src\Healthcheck.WebApi\obj\Release\Healthcheck.WebApi.pdb" to "c:\out\Healthcheck.WebApi.pdb".
CopyRoslynCompilerFilesToOutputDirectory:
  Creating directory "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn".
  Creating directory "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csc.exe.config" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\csc.exe.config".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csc.rsp" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\csc.rsp".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csi.exe" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\csi.exe".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csc.exe" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\csc.exe".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csi.exe.config" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\csi.exe.config".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.Build.Tasks.CodeAnalysis.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.Build.Tasks.CodeAnalysis.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csi.rsp" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\csi.rsp".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.CSharp.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.CodeAnalysis.CSharp.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.CodeAnalysis.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.CSharp.Scripting.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.CodeAnalysis.CSharp.Scripting.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.Scripting.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.CodeAnalysis.Scripting.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.VisualBasic.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.CodeAnalysis.VisualBasic.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CSharp.Core.targets" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.CSharp.Core.targets".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.DiaSymReader.Native.amd64.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.DiaSymReader.Native.amd64.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.Managed.Core.targets" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.Managed.Core.targets".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.DiaSymReader.Native.x86.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.DiaSymReader.Native.x86.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.VisualBasic.Core.targets" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.VisualBasic.Core.targets".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.Win32.Primitives.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\Microsoft.Win32.Primitives.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.AppContext.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.AppContext.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Collections.Immutable.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Collections.Immutable.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Diagnostics.DiagnosticSource.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Diagnostics.DiagnosticSource.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Console.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Console.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Diagnostics.StackTrace.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Diagnostics.StackTrace.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Diagnostics.FileVersionInfo.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Diagnostics.FileVersionInfo.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Globalization.Calendars.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Globalization.Calendars.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.IO.Compression.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.IO.Compression.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.IO.Compression.ZipFile.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.IO.Compression.ZipFile.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.IO.FileSystem.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.IO.FileSystem.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.IO.FileSystem.Primitives.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.IO.FileSystem.Primitives.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Net.Http.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Net.Http.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Net.Sockets.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Net.Sockets.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Reflection.Metadata.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Reflection.Metadata.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Runtime.InteropServices.RuntimeInformation.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Runtime.InteropServices.RuntimeInformation.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Security.Cryptography.Algorithms.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Security.Cryptography.Algorithms.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Security.Cryptography.Encoding.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Security.Cryptography.Encoding.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Security.Cryptography.Primitives.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Security.Cryptography.Primitives.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Text.Encoding.CodePages.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Text.Encoding.CodePages.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Security.Cryptography.X509Certificates.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Security.Cryptography.X509Certificates.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Threading.Tasks.Extensions.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Threading.Tasks.Extensions.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.ValueTuple.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.ValueTuple.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Xml.ReaderWriter.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Xml.ReaderWriter.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Xml.XmlDocument.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Xml.XmlDocument.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Xml.XPath.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Xml.XPath.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Xml.XPath.XDocument.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\System.Xml.XPath.XDocument.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\vbc.exe" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\vbc.exe".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\VBCSCompiler.exe" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\VBCSCompiler.exe".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\vbc.exe.config" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\vbc.exe.config".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\VBCSCompiler.exe.config" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\VBCSCompiler.exe.config".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\vbc.rsp" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\roslyn\vbc.rsp".
_CopyWebApplicationLegacy:
  Copying Web Application Project Files for Healthcheck.WebApi
  Copying file from "C:\src\Healthcheck.WebApi\obj\Release\Healthcheck.WebApi.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\Healthcheck.WebApi.dll".
  Copying file from "C:\src\Healthcheck.WebApi\obj\Release\Healthcheck.WebApi.pdb" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\Healthcheck.WebApi.pdb".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Client.5.2.6\lib\net45\System.Net.Http.Formatting.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\System.Net.Http.Formatting.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Core.5.2.6\lib\net45\System.Web.Http.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\System.Web.Http.dll".
  Copying file from "C:\src\packages\Newtonsoft.Json.11.0.2\lib\net45\Newtonsoft.Json.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\Newtonsoft.Json.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.WebHost.5.2.6\lib\net45\System.Web.Http.WebHost.dll" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\System.Web.Http.WebHost.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.xml" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.xml".
  Copying file from "C:\src\packages\Newtonsoft.Json.11.0.2\lib\net45\Newtonsoft.Json.xml" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\Newtonsoft.Json.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Core.5.2.6\lib\net45\System.Web.Http.xml" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\System.Web.Http.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Client.5.2.6\lib\net45\System.Net.Http.Formatting.xml" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\System.Net.Http.Formatting.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.WebHost.5.2.6\lib\net45\System.Web.Http.WebHost.xml" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\bin\System.Web.Http.WebHost.xml".
  Copying file from "C:\src\Healthcheck.WebApi\Web.config" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\Web.config".
  Copying file from "C:\src\Healthcheck.WebApi\Global.asax" to "c:\out\_PublishedWebsites\Healthcheck.WebApi\Global.asax".
Done Building Project "C:\src\Healthcheck.WebApi\Healthcheck.WebApi.csproj" (default targets).

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:04.78
Removing intermediate container df748f2a9f7b
 ---> 904a2cd2c3a6
Step 9/18 : FROM mcr.microsoft.com/dotnet/framework/aspnet:4.7.2-windowsservercore-ltsc2019
4.7.2-windowsservercore-ltsc2019: Pulling from dotnet/framework/aspnet
4612f6d0b889: Pull complete
aa4f58cd6da1: Pull complete
0ade8a697dd3: Pull complete
be135a6ad0a6: Pull complete
8c66737063ae: Pull complete
ef23c4e70b97: Pull complete
dd0eb9a009c4: Pull complete
17d8183885e9: Pull complete
a4fa06866661: Pull complete
65ab7310d87e: Pull complete
abbe824643f5: Pull complete
Digest: sha256:fd3d814d290d211df86772b5df37c2cd71b2fe83e03e32c249f28ed11d61a3b8
Status: Downloaded newer image for mcr.microsoft.com/dotnet/framework/aspnet:4.7.2-windowsservercore-ltsc2019
 ---> 7f4c6984c73c
Step 10/18 : SHELL ["powershell", "-Command", "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue';"]
 ---> Running in ec266fc66372
Removing intermediate container ec266fc66372
 ---> c2b540614fc3
Step 11/18 : RUN Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log' -n 'centralLogFileMode' -v 'CentralW3C';     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'truncateSize' -v 4294967295;     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'period' -v 'MaxSize';     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'directory' -v 'c:\iislog'
 ---> Running in a157b3c493b0
Removing intermediate container a157b3c493b0
 ---> 433565ecc694
Step 12/18 : WORKDIR C:\healthcheck-api
 ---> Running in 880012ac3636
Removing intermediate container 880012ac3636
 ---> 1277c08b687f
Step 13/18 : RUN Remove-Website -Name 'Default Web Site';    New-Website -Name 'healthcheck-api' -PhysicalPath 'C:\healthcheck-api'
 ---> Running in 2ca54b40808e

Name             ID   State      Physical Path                  Bindings
----             --   -----      -------------                  --------
healthcheck-api  1414 Started    C:\healthcheck-api             http *:80:
                 0610
                 33


Removing intermediate container 2ca54b40808e
 ---> 14fd3cfffba4
Step 14/18 : ENV APP_ENVIRONMENT="dev"
 ---> Running in 2c5db573a320
Removing intermediate container 2c5db573a320
 ---> d1f559ebb57f
Step 15/18 : HEALTHCHECK --interval=5s  CMD powershell -command     try {      $response = iwr http://localhost/diagnostics -UseBasicParsing;      if ($response.StatusCode -eq 200) { return 0}      else {return 1};     } catch { return 1 }
 ---> Running in c5bd473b12ca
Removing intermediate container c5bd473b12ca
 ---> 298d7e100acf
Step 16/18 : ENTRYPOINT ["powershell"]
 ---> Running in d6c412653971
Removing intermediate container d6c412653971
 ---> 5fbcc9ce6d5f
Step 17/18 : CMD Start-Process -NoNewWindow -FilePath C:\ServiceMonitor.exe -ArgumentList w3svc;     Invoke-WebRequest http://localhost/diagnostics -UseBasicParsing | Out-Null;     netsh http flush logbuffer | Out-Null;     Get-Content -path 'C:\iislog\W3SVC\u_extend1.log' -Tail 1 -Wait
 ---> [Warning] Shell-form ENTRYPOINT and exec-form CMD may have unexpected results
 ---> Running in ac7815ffa75d
Removing intermediate container ac7815ffa75d
 ---> c488e9196358
Step 18/18 : COPY --from=builder C:\out\_PublishedWebsites\Healthcheck.WebApi c:\healthcheck-api
 ---> 9880cb87eee8
Successfully built 9880cb87eee8
Successfully tagged dockeronwindows/ch03-iis-healthcheck:2e
******* run: docker container run -d -P --name healthcheck dockeronwindows/ch03-iis-healthcheck:2e
******* docker container ls
******** notes
The starting up appears at the beginning.
The docker container ls shows how they look like in both cases.

******** starting: PS C:\> docker container ls
docker container ls
CONTAINER ID        IMAGE                                               COMMAND                   CREATED             STATUS                            PORTS                   NAMES
da2469e8fe8b        dockeronwindows/ch03-iis-healthcheck:2e             "powershell 'powersh…"    8 seconds ago       Up 4 seconds (health: starting)   0.0.0.0:1518->80/tcp    healthcheck
d312463fd8e7        dockeronwindows/ch03-iis-environment-variables:2e   "powershell 'powersh…"    About an hour ago   Up About an hour                  0.0.0.0:24848->80/tcp   iis-env
******** healthy: PS C:\> docker container ls
docker container ls
CONTAINER ID        IMAGE                                               COMMAND                   CREATED             STATUS                   PORTS                   NAMES
da2469e8fe8b        dockeronwindows/ch03-iis-healthcheck:2e             "powershell 'powersh…"    2 minutes ago       Up 2 minutes (healthy)   0.0.0.0:1518->80/tcp    healthcheck
d312463fd8e7        dockeronwindows/ch03-iis-environment-variables:2e   "powershell 'powersh…"    About an hour ago   Up About an hour         0.0.0.0:24848->80/tcp   iis-env
******** unhealthy: PS C:\> docker container ls
docker container ls
CONTAINER ID        IMAGE                                               COMMAND                   CREATED             STATUS                     PORTS                   NAMES
da2469e8fe8b        dockeronwindows/ch03-iis-healthcheck:2e             "powershell 'powersh…"    4 minutes ago       Up 4 minutes (unhealthy)   0.0.0.0:1518->80/tcp    healthcheck
d312463fd8e7        dockeronwindows/ch03-iis-environment-variables:2e   "powershell 'powersh…"    About an hour ago   Up About an hour           0.0.0.0:24848->80/tcp   iis-env
******* port: docker container port healthcheck
******* web: http://localhost:<port>/diagnostics
When healthy, the return status is good/green
When unhealthy, the connection URL fails

******* ps: iwr "http://localhost:$port/toggle/unhealthy" -Method Post
Use PS iwr "http://localhost:1518/toggle/unhealthy" -Method Post
and iwr "http://localhost:1518/toggle/healthy" -Method Post
to toggle between healthy and unhealthy modes.

***** separating dependencies
****** creating docker images for SQL server databases
       [[file:ch03/5-ch03-sql-server/Dockerfile::#escape=`][5-ch03-sql-server/Dockerfile]]
       [[file:ch03/6-ch03-nerd-dinner-db/Dockerfile::# escape=`][6-ch03-nerd-dinner-db/Dockerfile]]
******* docker image build 
******** docker image build -t dockeronwindows/ch03-sql-server:2e ./5-ch03-sql-server
********* transcript
PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03> docker image build -t dockeronwindows/ch03-sql-server:2e ./5-ch03-sql-server
Sending build context to Docker daemon  4.608kB
Step 1/8 : FROM mcr.microsoft.com/windows/servercore:ltsc2019
 ---> 1ddfa8bee56a
Step 2/8 : SHELL ["powershell", "-Command", "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue';"]
 ---> Using cache
 ---> 85dcd26a965b
Step 3/8 : ARG DOWNLOAD_URL="https://go.microsoft.com/fwlink/?linkid=829176"
 ---> Running in 3355246972be
Removing intermediate container 3355246972be
 ---> bb72094a31f7
Step 4/8 : ENV sa_password="_"     sa_password_path="C:\ProgramData\Docker\secrets\sa-password"
 ---> Running in 1dce90193c2b
Removing intermediate container 1dce90193c2b
 ---> 7076d4d93d74
Step 5/8 : RUN Invoke-WebRequest -Uri $env:DOWNLOAD_URL -OutFile sqlexpress.exe;     Start-Process -Wait -FilePath .\sqlexpress.exe -ArgumentList /qs, /x:setup ;     .\setup\setup.exe /q /ACTION=Install /INSTANCENAME=SQLEXPRESS /FEATURES=SQLEngine /UPDATEENABLED=0 /SQLSVCACCOUNT='NT AUTHORITY\System' /SQLSYSADMINACCOUNTS='BUILTIN\ADMINISTRATORS' /TCPENABLED=1 /NPENABLED=0 /IACCEPTSQLSERVERLICENSETERMS ;     Remove-Item -Recurse -Force sqlexpress.exe, setup
 ---> Running in 39404923808d
Microsoft .NET Framework CasPol 4.7.3190.0
for Microsoft .NET Framework version 4.7.3190.0
Copyright (C) Microsoft Corporation.  All rights reserved.

WARNING: The .NET Framework does not apply CAS policy by default. Any settings
shown or modified by CasPol will only affect applications that opt into using
CAS policy.

Please see http://go.microsoft.com/fwlink/?LinkId=131738 for more information.


Success
Microsoft .NET Framework CasPol 4.7.3190.0
for Microsoft .NET Framework version 4.7.3190.0
Copyright (C) Microsoft Corporation.  All rights reserved.

WARNING: The .NET Framework does not apply CAS policy by default. Any settings
shown or modified by CasPol will only affect applications that opt into using
CAS policy.

Please see http://go.microsoft.com/fwlink/?LinkId=131738 for more information.


Success
SQL Server 2017 transmits information about your installation experience, as well as other usage and performance data, to Microsoft to help improve the product. To learn more about SQL Server 2017 data processing and privacy controls, please see the Privacy Statement.
Microsoft (R) SQL Server 2017 14.00.1000.169
Copyright (c) 2017 Microsoft.  All rights reserved.

Removing intermediate container 39404923808d
 ---> 826b3d17eeed
Step 6/8 : RUN Stop-Service MSSQL`$SQLEXPRESS ;     Set-ItemProperty -path 'HKLM:\software\microsoft\microsoft sql server\mssql14.SQLEXPRESS\mssqlserver\supersocketnetlib\tcp\ipall' -name tcpdynamicports -value '' ;     Set-ItemProperty -path 'HKLM:\software\microsoft\microsoft sql server\mssql14.SQLEXPRESS\mssqlserver\supersocketnetlib\tcp\ipall' -name tcpport -value 1433 ;     Set-ItemProperty -path 'HKLM:\software\microsoft\microsoft sql server\mssql14.SQLEXPRESS\mssqlserver\' -name LoginMode -value 2 ;
 ---> Running in b9ba8d00bd10
WARNING: Waiting for service 'SQL Server (SQLEXPRESS) (MSSQL$SQLEXPRESS)' to
stop...
WARNING: Waiting for service 'SQL Server (SQLEXPRESS) (MSSQL$SQLEXPRESS)' to
stop...
WARNING: Waiting for service 'SQL Server (SQLEXPRESS) (MSSQL$SQLEXPRESS)' to
stop...
WARNING: Waiting for service 'SQL Server (SQLEXPRESS) (MSSQL$SQLEXPRESS)' to
stop...
Removing intermediate container b9ba8d00bd10
 ---> f9b1c3900d6a
Step 7/8 : COPY start.ps1 /
 ---> a190b2d7dd5a
Step 8/8 : CMD .\start.ps1 -Verbose
 ---> Running in a59db31aa3a2
Removing intermediate container a59db31aa3a2
 ---> 1e3fd45e9574
Successfully built 1e3fd45e9574
Successfully tagged dockeronwindows/ch03-sql-server:2e
******** docker image build -t dockeronwindows/ch03-nerd-dinner-db:2e ./6-ch03-nerd-dinner-db
********* transcript of failed build
PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03> docker image build -t dockeronwindows/ch03-nerd-dinner-db:2e ./6-ch03-nerd-dinner-db
Sending build context to Docker daemon  20.48kB
Step 1/16 : FROM microsoft/dotnet-framework:4.7.2-sdk-windowsservercore-ltsc2019 AS builder
 ---> 1afb4e8593d8
Step 2/16 : SHELL ["powershell", "-Command", "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue';"]
 ---> Running in 208755be5467
Removing intermediate container 208755be5467
 ---> 94790392a1a8
Step 3/16 : RUN nuget install Microsoft.Data.Tools.Msbuild -Version 10.0.61804.210
 ---> Running in 168e5811211c
Feeds used:
  https://api.nuget.org/v3/index.json

Attempting to gather dependency information for package 'Microsoft.Data.Tools.Msbuild.10.0.61804.210' with respect to project 'C:\', targeting 'Any,Version=v0.0'
Gathering dependency information took 798.84 ms
Attempting to resolve dependencies for package 'Microsoft.Data.Tools.Msbuild.10.0.61804.210' with DependencyBehavior 'Lowest'
Resolving dependency information took 0 ms
Resolving actions to install package 'Microsoft.Data.Tools.Msbuild.10.0.61804.210'
Resolved actions to install package 'Microsoft.Data.Tools.Msbuild.10.0.61804.210'
Retrieving package 'Microsoft.Data.Tools.Msbuild 10.0.61804.210' from 'nuget.org'.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.data.tools.msbuild/10.0.61804.210/microsoft.data.tools.msbuild.10.0.61804.210.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.data.tools.msbuild/10.0.61804.210/microsoft.data.tools.msbuild.10.0.61804.210.nupkg 271ms
Installing Microsoft.Data.Tools.Msbuild 10.0.61804.210.
Adding package 'Microsoft.Data.Tools.Msbuild.10.0.61804.210' to folder 'C:\'
Added package 'Microsoft.Data.Tools.Msbuild.10.0.61804.210' to folder 'C:\'
Successfully installed 'Microsoft.Data.Tools.Msbuild 10.0.61804.210' to C:\
Executing nuget actions took 4.19 sec
Removing intermediate container 168e5811211c
 ---> 653bcc72b98f
Step 4/16 : ENV download_url="https://download.microsoft.com/download/6/E/4/6E406E38-0A01-4DD1-B85E-6CA7CF79C8F7/EN/x64/DacFramework.msi"
 ---> Running in 68f526fa2cda
Removing intermediate container 68f526fa2cda
 ---> a43ee03f149c
Step 5/16 : RUN Invoke-WebRequest -Uri $env:download_url -OutFile DacFramework.msi ;     Start-Process msiexec.exe -ArgumentList '/i', 'DacFramework.msi', '/quiet', '/norestart' -NoNewWindow -Wait;     Remove-Item -Force DacFramework.msi
 ---> Running in cec9e7b150d4
Removing intermediate container cec9e7b150d4
 ---> 86000200240a
Step 6/16 : WORKDIR C:\src\NerdDinner.Database
 ---> Running in c3c3645725fd
Removing intermediate container c3c3645725fd
 ---> 262ed693c841
Step 7/16 : COPY src\NerdDinner.Database .
 ---> 3ec2d83921d5
Step 8/16 : RUN msbuild NerdDinner.Database.sqlproj     /p:SQLDBExtensionsRefPath="C:\Microsoft.Data.Tools.Msbuild.10.0.61804.210\lib\net46"     /p:SqlServerRedistPath="C:\Microsoft.Data.Tools.Msbuild.10.0.61804.210\lib\net46"
 ---> Running in 346321c8d1c5
Microsoft (R) Build Engine version 16.3.1+1def00d3d for .NET Framework
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 12/25/2020 9:18:03 PM.
Project "C:\src\NerdDinner.Database\NerdDinner.Database.sqlproj" on node 1 (default targets).
PrepareForBuild:
  Creating directory "..\..\docker\".
  Creating directory "obj\Debug\".
CoreCompile:
  C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\Roslyn\csc.exe /noconfig /nowarn:1701,1702 /nostdlib+ /errorreport:prompt /warn:4 /define:DEBUG;TRACE /highentropyva+ /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5.2\mscorlib.dll" /debug+ /debug:full /optimize- /out:obj\Debug\NerdDinner.Database.dll /subsystemversion:6.00 /target:library /warnaserror- /utf8output /langversion:7.3 "C:\Users\ContainerAdministrator\AppData\Local\Temp\.NETFramework,Version=v4.5.2.SqlClrAttributes.cs"
  Using shared compilation with compiler from directory: C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\Roslyn
SqlBuild:
  Creating a model to represent the project...
  Loading project references...
  Loading project files...
  Building the project model and resolving object interdependencies...
  Validating the project model...
  Writing model to C:\src\NerdDinner.Database\obj\Debug\Model.xml...
CopyFilesToOutputDirectory:
  Copying file from "C:\src\NerdDinner.Database\obj\Debug\NerdDinner.Database.dll" to "C:\docker\NerdDinner.Database.dll".
  NerdDinner.Database -> C:\docker\NerdDinner.Database.dll
  Copying file from "C:\src\NerdDinner.Database\obj\Debug\NerdDinner.Database.pdb" to "C:\docker\NerdDinner.Database.pdb".
SqlPrepareForRun:
  NerdDinner.Database -> C:\docker\NerdDinner.Database.dacpac
Done Building Project "C:\src\NerdDinner.Database\NerdDinner.Database.sqlproj" (default targets).

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:04.91
Removing intermediate container 346321c8d1c5
 ---> 40b0e8111e3a
Step 9/16 : FROM dockeronwindows/ch03-sql-server:2e
 ---> 1e3fd45e9574
Step 10/16 : ENV DATA_PATH="C:\data"     sa_password="N3rdD!Nne720^6"
 ---> Running in 90942af70229
Removing intermediate container 90942af70229
 ---> c1e741a46650
Step 11/16 : VOLUME ${DATA_PATH}
 ---> Running in d1c25be26e39
Removing intermediate container d1c25be26e39
 ---> 079f2207a217
Step 12/16 : WORKDIR C:\init
 ---> Running in 6a3fff7869e9
Removing intermediate container 6a3fff7869e9
 ---> d8bfcab0e4e1
Step 13/16 : COPY Initialize-Database.ps1 .
 ---> 9ec5f43454b8
Step 14/16 : CMD powershell ./Initialize-Database.ps1 -sa_password $env:sa_password -data_path $env:data_path -Verbose
 ---> Running in 2b9f578b3c08
Removing intermediate container 2b9f578b3c08
 ---> 7ea7f83e1d01
Step 15/16 : COPY --from=builder ["C:\\Program Files\\Microsoft SQL Server\\140\\DAC", "C:\\Program Files\\Microsoft SQL Server\\140\\DAC"]
 ---> f55168d94f3b
Step 16/16 : COPY --from=builder C:\src\NerdDinner.Database\bin\Debug\NerdDinner.Database.dacpac .
COPY failed: CreateFile \\?\Volume{950c2be3-1a74-4d9d-a196-78a24ea3a143}\src\NerdDinner.Database\bin\Debug\NerdDinner.Database.dacpac: The system cannot find the path specified.
********* DONE hindsight: best way to figure out what went wrong
          CLOSED: [2020-12-27 Sun 22:51]
           - State "DONE"       from              [2020-12-27 Sun 22:51]
1. narrow the transcript
2. search up for the failed message fail NerdDinner.Database.dacpac
3. Would find the step that dacpac was copied
SqlPrepareForRun:
  NerdDinner.Database -> C:\docker\NerdDinner.Database.dacpac
4. So, the source path was incorrect

********* Since it failed on the last step, we can just comment out the last step, and then run the image to examine where the .dacpac is actually built
docker container run -it dockeronwindows/ch03-nerd-dinner-db:2e powershell
docker container run --name ch03-nerd-dinner-db dockeronwindows/ch03-nerd-dinner-db:2e

The src folder did not exist on image
********* By running container with name ch03-nerd-dinner-db, and looking at the logs
********** transcript
docker container logs ch03-nerd-dinner-db
VERBOSE: Starting SQL Server
VERBOSE: Changing SA login credentials
VERBOSE: No data files - will create new database
Generating publish script for database 'NerdDinner' on server '.\SQLEXPRESS'.
 *** Could not load package from 'NerdDinner.Database.dacpac'.
Could not find file 'C:\init\NerdDinner.Database.dacpac'.
Invoke-Sqlcmd : Could not find file 'C:\init\deploy.sql'.
At C:\init\Initialize-Database.ps1:43 char:1
+ Invoke-Sqlcmd -InputFile deploy.sql -Variable $SqlCmdVars -Verbose
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidResult: (:) [Invoke-Sqlcmd], FileNotFound 
   Exception
    + FullyQualifiedErrorId : ExecutionFailed,Microsoft.SqlServer.Management.P 
   owerShell.GetScriptCommand
 
VERBOSE: Deployed NerdDinner database, data files at: C:\data
********* It is also possible to be a problem with old Docker version.
********* Update Docker Desktop on \\air to 3.0.0(50684) same as kwee1
Confirmed that updating Docker Desktop from 2.1.0.5 to 3.0.0 also updated the engine, compose etc.
So it is best to rebuild the image.
********* layer info not useful 
dockeronwindows/ch03-nerd-dinner-db              2e                                       f55168d94f3b   15 hours ago    5.96GB

dockeronwindows/ch03-nerd-dinner-db | f55168d94f3b
docker image inspect f551
[

        "RootFS": {
            "Type": "layers",
            "Layers": [
                "sha256:c4d02418787d264406bed4956f2faccd58932e4466bbd693c1795e3a64d60e90", 
                "sha256:fabd119160feb73eb1b24ad68e070b55b7057b8396e0c6ba1577d5b40d1dd654",
                "sha256:1d5cf55651bea35819e8f831adfd0d9b5a7dd07c883b3728fe7e955530dec851",
                "sha256:a6ed920f6949f44be79f6e68d474a18cdc7ecfe37ae201096fff6f265f2a54fa",
                "sha256:58e56372675478359ad6e334bd06bdc70a4d74272cb8031eef97e0c3bc3d7dec",
                "sha256:7b6e4f1c6c4870ce56f8459bdae3a1fc81d7c085dc10ab4f3edca48d8bbcd2aa",
                "sha256:0f4a17aa09b90a342a17f7439593bad912cc20725929ae870a0691de59fdd52c",
                "sha256:98f472c527e4b4adcbe96beda9c9286ad2619b84f133774c13dce77d6701310f",
                "sha256:875768c6b28854591c8f77628c6a3b2cecb0b76232178b70cd35286d18be691d",
                "sha256:1c2121cabc27d5ef25f9e8db4cb88ae6c1e0a6392eaeb8af11c767e9f350a5b2",
                "sha256:4d0d877cc14b1aa2ec756adc51a8c8204d8e58932aaaa0b68e15d8690ae9a7ea",
                "sha256:a5aaa8c15f6043d4af17d3a74a555e615837d32d933ed2dca2dc520ee842d8b2",
                "sha256:d5a81c37964bcdc256a4fa6ea962772a79e3dca8dfd571caced1e49129465bfa",
                "sha256:aeac528ab080ac7d050de88655727d736a5c96083c57a35e2211702c6b08501f",
                "sha256:d548771faf7786e7784426ddc52a715a7b88d686e58e2c87ea341e45890fbd5e"
            ]
        },
]
The layers do not correspond to dangling images.
********* interactive run and try msbuild directly
********** notes
The build in container fails earlier than in failed build in image
********** transcript
PS C:\> docker container run -it --name dbpart1 dockeronwindows/ch03-nerd-dinner-db-part1:2e powershell
Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.

PS C:\src\NerdDinner.Database> msbuild -version
Microsoft (R) Build Engine version 16.3.1+1def00d3d for .NET Framework
Copyright (C) Microsoft Corporation. All rights reserved.
16.3.1.50202
PS C:\src\NerdDinner.Database> ls


    Directory: C:\src\NerdDinner.Database



Mode                LastWriteTime         Length Name
----                -------------         ------ ----
d-----        9/16/2019   4:15 PM                dbo
-a----        9/16/2019   4:15 PM           4067 NerdDinner.Database.sqlproj


PS C:\src\NerdDinner.Database> msbuild .\NerdDinner.Database.sqlproj /p:SQLDBExtensionsRefPath="C:\Microsoft.Data.Tools.MsBuild.10.0.61804.210\lib\net46" /p:SqlServerRedistPath="C:\Microsoft.Data.
Tools.MsBuild.10.0.61864.210\lib\net46"
Microsoft (R) Build Engine version 16.3.1+1def00d3d for .NET Framework
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 12/27/2020 12:11:55 PM.
Project "C:\src\NerdDinner.Database\NerdDinner.Database.sqlproj" on node 1 (default targets).
GenerateSqlTargetFrameworkMoniker:
Skipping target "GenerateSqlTargetFrameworkMoniker" because all output files are up-to-date with respect to the input files.
CoreCompile:
  C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\Roslyn\csc.exe /noconfig /nowarn:1701,1702 /nostdlib+ /errorreport:prompt /warn:4 /define:DEBUG;TRACE /highent
  ropyva+ /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5.2\mscorlib.dll" /debug+ /debug:full /optimize- /out:obj\Debug\NerdDinner.Database.dll /sub
  systemversion:6.00 /target:library /warnaserror- /utf8output /langversion:7.3 "C:\Users\ContainerAdministrator\AppData\Local\Temp\.NETFramework,Version=v4.5.2.SqlClrAttributes.cs"
  Using shared compilation with compiler from directory: C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\Roslyn
C:\Microsoft.Data.Tools.MsBuild.10.0.61804.210\lib\net46\Microsoft.Data.Tools.Schema.SqlTasks.targets(477,5): error MSB4062: The "SqlModelResolutionTask" task could not be loaded from the assembl
y C:\Microsoft.Data.Tools.MsBuild.10.0.61864.210\lib\net46\Microsoft.Data.Tools.Schema.Tasks.Sql.dll. Could not load file or assembly 'file:///C:\Microsoft.Data.Tools.MsBuild.10.0.61864.210\lib\n
et46\Microsoft.Data.Tools.Schema.Tasks.Sql.dll' or one of its dependencies. The system cannot find the file specified. Confirm that the <UsingTask> declaration is correct, that the assembly and a
ll its dependencies are available, and that the task contains a public class that implements Microsoft.Build.Framework.ITask. [C:\src\NerdDinner.Database\NerdDinner.Database.sqlproj]
Done Building Project "C:\src\NerdDinner.Database\NerdDinner.Database.sqlproj" (default targets) -- FAILED.


Build FAILED.

"C:\src\NerdDinner.Database\NerdDinner.Database.sqlproj" (default target) (1) ->
(_SetupSqlBuildInputs target) ->
  C:\Microsoft.Data.Tools.MsBuild.10.0.61804.210\lib\net46\Microsoft.Data.Tools.Schema.SqlTasks.targets(477,5): error MSB4062: The "SqlModelResolutionTask" task could not be loaded from the assem
bly C:\Microsoft.Data.Tools.MsBuild.10.0.61864.210\lib\net46\Microsoft.Data.Tools.Schema.Tasks.Sql.dll. Could not load file or assembly 'file:///C:\Microsoft.Data.Tools.MsBuild.10.0.61864.210\lib
\net46\Microsoft.Data.Tools.Schema.Tasks.Sql.dll' or one of its dependencies. The system cannot find the file specified. Confirm that the <UsingTask> declaration is correct, that the assembly and
 all its dependencies are available, and that the task contains a public class that implements Microsoft.Build.Framework.ITask. [C:\src\NerdDinner.Database\NerdDinner.Database.sqlproj]

    0 Warning(s)
    1 Error(s)

Time Elapsed 00:00:01.49
********** The q that arise is how to run a container interactively without have to build again
docker container start -i dbpart1 // works in powershell
// works in emacs shell if we ignore the initial garbage coming out
// emacs shell: invoke powershell first, no difference

****** managing database files for SQL server containers
******* notes
1. want to store database files outside the db container to retain state info
2. volumes is the soln, but there is a catch
[[file:ch03/6-ch03-nerd-dinner-db/Initialize-Database.ps1::param(][Initialize-Database.ps1]]

******* running databases in containers
disposable:
   docker container run -d -p 1433:1433 --name nerd-dinner-db dockeronwindows/ch03-nerd-dinner-db:2e

persistent:
   mkdir -p c:\databases\nd
   docker container run -d -p 1433:1433 --name nerd-dinner-db -v c:\databases\nd:c:\data dockeronwindows/ch03-nerd-dinner-db:2e

******** transcript
# Create a container but name is in use
 > docker container run -d -p 1433:1433 --name nerd-dinner-db -v c:\databases\nd:c:\data dockeronwindows/ch03-nerd-dinner-db:2e
 docker: Error response from daemon: Conflict. The container name "/nerd-dinner-db" is already in use by container "e289a3ec800825d99baac8a1cfe47afcd30516969a88b7810cfe7d4303399ea8". You have to remove (or rename) that container to be able to reuse that name.
 See 'docker run --help'.
# Remove named container, but found that it is still running 
 > docker container rm nerd-dinner-db
 Error response from daemon: You cannot remove a running container e289a3ec800825d99baac8a1cfe47afcd30516969a88b7810cfe7d4303399ea8. Stop the container before attempting removal or force remove
# First stop the named container
 > docker container stop nerd-dinner-db
 nerd-dinner-db
# Now, can remove successfully
 > docker container rm nerd-dinner-db
 nerd-dinner-db
# Run a container with external database
 > docker container run -d -p 1433:1433 --name nerd-dinner-db -v c:\databases\nd:c:\data dockeronwindows/ch03-nerd-dinner-db:2e
 d49fb08e65829614edae555dda0e48a06b44a87a6d8202e82bd274530b0c948c
# Stop the run 
 > docker container stop nerd-dinner-db
 nerd-dinner-db
# Start the container again 
 > docker container start nerd-dinner-db
 nerd-dinner-db
# Stop the container 
 > docker container stop nerd-dinner-db

****** connecting to database containers from app container
******* failed: docker image build -t dockeronwindows/ch03-nerd-dinner-web:2e ./7-ch03-nerd-dinner-web 
******** transcript
PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03> docker image build -t dockeronwindows/ch03-nerd-dinner-web:2e ./7-ch03-nerd-dinner-web
Sending build context to Docker daemon   3.17MB
Step 1/17 : FROM microsoft/dotnet-framework:4.7.2-sdk-windowsservercore-ltsc2019 AS builder
 ---> 1afb4e8593d8
Step 2/17 : WORKDIR C:\src\NerdDinner
 ---> Running in 4d5b0e1ab1e5
Removing intermediate container 4d5b0e1ab1e5
 ---> 42008f8a0305
Step 3/17 : COPY src\NerdDinner\packages.config .
 ---> 3413f2a6aa69
Step 4/17 : RUN nuget restore packages.config -PackagesDirectory ..\packages
 ---> Running in 3b3ed9676d99
Restoring NuGet package DotNetOpenAuth.AspNet.4.3.0.13117.
Restoring NuGet package DotNetOpenAuth.Core.4.3.0.13117.
Restoring NuGet package DotNetOpenAuth.OAuth.Consumer.4.3.0.13117.
Restoring NuGet package DotNetOpenAuth.OAuth.Core.4.3.0.13117.
Restoring NuGet package DotNetOpenAuth.OpenId.Core.4.3.0.13117.
Restoring NuGet package DotNetOpenAuth.OpenId.RelyingParty.4.3.0.13117.
Restoring NuGet package EntityFramework.5.0.0.
Restoring NuGet package Glimpse.1.3.0.
Restoring NuGet package Glimpse.AspNet.1.2.1.
Restoring NuGet package Glimpse.Mvc4.1.2.1.
Restoring NuGet package jQuery.1.7.1.1.
Restoring NuGet package jquery.mobile.1.3.0.
Restoring NuGet package jQuery.UI.Combined.1.10.2.
Restoring NuGet package jQuery.Validation.1.11.1.
Restoring NuGet package knockoutjs.2.2.1.
Restoring NuGet package Microsoft.AspNet.Mvc.4.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/dotnetopenauth.core/4.3.0.13117/dotnetopenauth.core.4.3.0.13117.nupkg
  GET https://api.nuget.org/v3-flatcontainer/dotnetopenauth.aspnet/4.3.0.13117/dotnetopenauth.aspnet.4.3.0.13117.nupkg
  GET https://api.nuget.org/v3-flatcontainer/dotnetopenauth.oauth.consumer/4.3.0.13117/dotnetopenauth.oauth.consumer.4.3.0.13117.nupkg
  GET https://api.nuget.org/v3-flatcontainer/dotnetopenauth.oauth.core/4.3.0.13117/dotnetopenauth.oauth.core.4.3.0.13117.nupkg
  GET https://api.nuget.org/v3-flatcontainer/dotnetopenauth.openid.core/4.3.0.13117/dotnetopenauth.openid.core.4.3.0.13117.nupkg
  GET https://api.nuget.org/v3-flatcontainer/dotnetopenauth.openid.relyingparty/4.3.0.13117/dotnetopenauth.openid.relyingparty.4.3.0.13117.nupkg
  GET https://api.nuget.org/v3-flatcontainer/entityframework/5.0.0/entityframework.5.0.0.nupkg
  GET https://api.nuget.org/v3-flatcontainer/glimpse/1.3.0/glimpse.1.3.0.nupkg
  GET https://api.nuget.org/v3-flatcontainer/glimpse.aspnet/1.2.1/glimpse.aspnet.1.2.1.nupkg
  GET https://api.nuget.org/v3-flatcontainer/glimpse.mvc4/1.2.1/glimpse.mvc4.1.2.1.nupkg
  GET https://api.nuget.org/v3-flatcontainer/jquery/1.7.1.1/jquery.1.7.1.1.nupkg
  GET https://api.nuget.org/v3-flatcontainer/jquery.mobile/1.3.0/jquery.mobile.1.3.0.nupkg
  GET https://api.nuget.org/v3-flatcontainer/jquery.ui.combined/1.10.2/jquery.ui.combined.1.10.2.nupkg
  GET https://api.nuget.org/v3-flatcontainer/jquery.validation/1.11.1/jquery.validation.1.11.1.nupkg
  GET https://api.nuget.org/v3-flatcontainer/knockoutjs/2.2.1/knockoutjs.2.2.1.nupkg
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.mvc/4.0.20710/microsoft.aspnet.mvc.4.0.20710.nupkg
  OK https://api.nuget.org/v3-flatcontainer/entityframework/5.0.0/entityframework.5.0.0.nupkg 75ms
  OK https://api.nuget.org/v3-flatcontainer/jquery/1.7.1.1/jquery.1.7.1.1.nupkg 87ms
Installing jQuery 1.7.1.1.
Installing EntityFramework 5.0.0.
  OK https://api.nuget.org/v3-flatcontainer/jquery.validation/1.11.1/jquery.validation.1.11.1.nupkg 106ms
Installing jQuery.Validation 1.11.1.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.mvc/4.0.20710/microsoft.aspnet.mvc.4.0.20710.nupkg 111ms
Installing Microsoft.AspNet.Mvc 4.0.20710.0.
Adding package 'jQuery.Validation.1.11.1' to folder 'C:\src\packages'
Added package 'jQuery.Validation.1.11.1' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.Razor.2.0.20715.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.razor/2.0.20715/microsoft.aspnet.razor.2.0.20715.nupkg
  OK https://api.nuget.org/v3-flatcontainer/dotnetopenauth.oauth.core/4.3.0.13117/dotnetopenauth.oauth.core.4.3.0.13117.nupkg 179ms
Installing DotNetOpenAuth.OAuth.Core 4.3.0.13117.
  OK https://api.nuget.org/v3-flatcontainer/dotnetopenauth.openid.core/4.3.0.13117/dotnetopenauth.openid.core.4.3.0.13117.nupkg 196ms
Installing DotNetOpenAuth.OpenId.Core 4.3.0.13117.
  OK https://api.nuget.org/v3-flatcontainer/dotnetopenauth.openid.relyingparty/4.3.0.13117/dotnetopenauth.openid.relyingparty.4.3.0.13117.nupkg 220ms
Installing DotNetOpenAuth.OpenId.RelyingParty 4.3.0.13117.
Adding package 'jQuery.1.7.1.1' to folder 'C:\src\packages'
Added package 'jQuery.1.7.1.1' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.Web.Optimization.1.0.0.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.web.optimization/1.0.0/microsoft.aspnet.web.optimization.1.0.0.nupkg
Adding package 'DotNetOpenAuth.OAuth.Core.4.3.0.13117' to folder 'C:\src\packages'
  OK https://api.nuget.org/v3-flatcontainer/dotnetopenauth.core/4.3.0.13117/dotnetopenauth.core.4.3.0.13117.nupkg 372ms
Installing DotNetOpenAuth.Core 4.3.0.13117.
Added package 'DotNetOpenAuth.OAuth.Core.4.3.0.13117' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.WebApi.4.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi/4.0.20710/microsoft.aspnet.webapi.4.0.20710.nupkg
Adding package 'Microsoft.AspNet.Mvc.4.0.20710' to folder 'C:\src\packages'
  OK https://api.nuget.org/v3-flatcontainer/dotnetopenauth.aspnet/4.3.0.13117/dotnetopenauth.aspnet.4.3.0.13117.nupkg 479ms
Installing DotNetOpenAuth.AspNet 4.3.0.13117.
Added package 'Microsoft.AspNet.Mvc.4.0.20710' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.WebApi.Client.4.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.client/4.0.20710/microsoft.aspnet.webapi.client.4.0.20710.nupkg
  OK https://api.nuget.org/v3-flatcontainer/dotnetopenauth.oauth.consumer/4.3.0.13117/dotnetopenauth.oauth.consumer.4.3.0.13117.nupkg 496ms
Installing DotNetOpenAuth.OAuth.Consumer 4.3.0.13117.
  OK https://api.nuget.org/v3-flatcontainer/glimpse/1.3.0/glimpse.1.3.0.nupkg 521ms
Installing Glimpse 1.3.0.
  OK https://api.nuget.org/v3-flatcontainer/glimpse.mvc4/1.2.1/glimpse.mvc4.1.2.1.nupkg 535ms
Installing Glimpse.Mvc4 1.2.1.
  OK https://api.nuget.org/v3-flatcontainer/glimpse.aspnet/1.2.1/glimpse.aspnet.1.2.1.nupkg 553ms
Installing Glimpse.AspNet 1.2.1.
  OK https://api.nuget.org/v3-flatcontainer/jquery.ui.combined/1.10.2/jquery.ui.combined.1.10.2.nupkg 572ms
Installing jQuery.UI.Combined 1.10.2.
  OK https://api.nuget.org/v3-flatcontainer/jquery.mobile/1.3.0/jquery.mobile.1.3.0.nupkg 590ms
Installing jquery.mobile 1.3.0.
  OK https://api.nuget.org/v3-flatcontainer/knockoutjs/2.2.1/knockoutjs.2.2.1.nupkg 606ms
Installing knockoutjs 2.2.1.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.web.optimization/1.0.0/microsoft.aspnet.web.optimization.1.0.0.nupkg 296ms
Installing Microsoft.AspNet.Web.Optimization 1.0.0.
Adding package 'Microsoft.AspNet.Web.Optimization.1.0.0' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.Web.Optimization.1.0.0' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.WebApi.Core.4.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.core/4.0.20710/microsoft.aspnet.webapi.core.4.0.20710.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.razor/2.0.20715/microsoft.aspnet.razor.2.0.20715.nupkg 539ms
Installing Microsoft.AspNet.Razor 2.0.20715.0.
Adding package 'DotNetOpenAuth.OpenId.RelyingParty.4.3.0.13117' to folder 'C:\src\packages'
Added package 'DotNetOpenAuth.OpenId.RelyingParty.4.3.0.13117' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.WebApi.WebHost.4.0.20710.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.client/4.0.20710/microsoft.aspnet.webapi.client.4.0.20710.nupkg 319ms
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.webhost/4.0.20710/microsoft.aspnet.webapi.webhost.4.0.20710.nupkg
Installing Microsoft.AspNet.WebApi.Client 4.0.20710.0.
Adding package 'DotNetOpenAuth.AspNet.4.3.0.13117' to folder 'C:\src\packages'
Added package 'DotNetOpenAuth.AspNet.4.3.0.13117' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.WebPages.2.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webpages/2.0.20710/microsoft.aspnet.webpages.2.0.20710.nupkg
Adding package 'DotNetOpenAuth.OAuth.Consumer.4.3.0.13117' to folder 'C:\src\packages'
Added package 'DotNetOpenAuth.OAuth.Consumer.4.3.0.13117' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.WebPages.Data.2.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webpages.data/2.0.20710/microsoft.aspnet.webpages.data.2.0.20710.nupkg
Adding package 'Glimpse.Mvc4.1.2.1' to folder 'C:\src\packages'
Added package 'Glimpse.Mvc4.1.2.1' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.WebPages.OAuth.2.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webpages.oauth/2.0.20710/microsoft.aspnet.webpages.oauth.2.0.20710.nupkg
Adding package 'Glimpse.AspNet.1.2.1' to folder 'C:\src\packages'
Added package 'Glimpse.AspNet.1.2.1' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.AspNet.WebPages.WebData.2.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webpages.webdata/2.0.20710/microsoft.aspnet.webpages.webdata.2.0.20710.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi/4.0.20710/microsoft.aspnet.webapi.4.0.20710.nupkg 574ms
Installing Microsoft.AspNet.WebApi 4.0.20710.0.
Adding package 'Microsoft.AspNet.WebApi.4.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebApi.4.0.20710' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.codedom.providers.dotnetcompilerplatform/2.0.1/microsoft.codedom.providers.dotnetcompilerplatform.2.0.1.nupkg
Adding package 'knockoutjs.2.2.1' to folder 'C:\src\packages'
Added package 'knockoutjs.2.2.1' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.jQuery.Unobtrusive.Ajax.2.0.30116.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.jquery.unobtrusive.ajax/2.0.30116/microsoft.jquery.unobtrusive.ajax.2.0.30116.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.core/4.0.20710/microsoft.aspnet.webapi.core.4.0.20710.nupkg 387ms
Installing Microsoft.AspNet.WebApi.Core 4.0.20710.0.
Adding package 'Microsoft.AspNet.Razor.2.0.20715' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.Razor.2.0.20715' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.jQuery.Unobtrusive.Validation.2.0.30116.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.jquery.unobtrusive.validation/2.0.30116/microsoft.jquery.unobtrusive.validation.2.0.30116.nupkg
Adding package 'Microsoft.AspNet.WebApi.Client.4.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebApi.Client.4.0.20710' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.Net.Compilers.2.10.0.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.net.compilers/2.10.0/microsoft.net.compilers.2.10.0.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webapi.webhost/4.0.20710/microsoft.aspnet.webapi.webhost.4.0.20710.nupkg 423ms
Installing Microsoft.AspNet.WebApi.WebHost 4.0.20710.0.
Adding package 'Microsoft.AspNet.WebApi.WebHost.4.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebApi.WebHost.4.0.20710' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.Net.Http.2.0.20710.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.net.http/2.0.20710/microsoft.net.http.2.0.20710.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webpages.data/2.0.20710/microsoft.aspnet.webpages.data.2.0.20710.nupkg 433ms
Installing Microsoft.AspNet.WebPages.Data 2.0.20710.0.
Adding package 'Microsoft.AspNet.WebPages.Data.2.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebPages.Data.2.0.20710' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.SqlServer.Types.10.50.1600.1.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.sqlserver.types/10.50.1600.1/microsoft.sqlserver.types.10.50.1600.1.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.codedom.providers.dotnetcompilerplatform/2.0.1/microsoft.codedom.providers.dotnetcompilerplatform.2.0.1.nupkg 398ms
Installing Microsoft.CodeDom.Providers.DotNetCompilerPlatform 2.0.1.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webpages/2.0.20710/microsoft.aspnet.webpages.2.0.20710.nupkg 603ms
Installing Microsoft.AspNet.WebPages 2.0.20710.0.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webpages.oauth/2.0.20710/microsoft.aspnet.webpages.oauth.2.0.20710.nupkg 595ms
Installing Microsoft.AspNet.WebPages.OAuth 2.0.20710.0.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.jquery.unobtrusive.ajax/2.0.30116/microsoft.jquery.unobtrusive.ajax.2.0.30116.nupkg 604ms
Installing Microsoft.jQuery.Unobtrusive.Ajax 2.0.30116.0.
Adding package 'Microsoft.jQuery.Unobtrusive.Ajax.2.0.30116' to folder 'C:\src\packages'
Added package 'Microsoft.jQuery.Unobtrusive.Ajax.2.0.30116' to folder 'C:\src\packages'
Restoring NuGet package Microsoft.Web.Infrastructure.1.0.0.
  GET https://api.nuget.org/v3-flatcontainer/microsoft.web.infrastructure/1.0.0/microsoft.web.infrastructure.1.0.0.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.net.http/2.0.20710/microsoft.net.http.2.0.20710.nupkg 385ms
Installing Microsoft.Net.Http 2.0.20710.0.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.jquery.unobtrusive.validation/2.0.30116/microsoft.jquery.unobtrusive.validation.2.0.30116.nupkg 591ms
Installing Microsoft.jQuery.Unobtrusive.Validation 2.0.30116.0.
Adding package 'jQuery.UI.Combined.1.10.2' to folder 'C:\src\packages'
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.webpages.webdata/2.0.20710/microsoft.aspnet.webpages.webdata.2.0.20710.nupkg 869ms
Installing Microsoft.AspNet.WebPages.WebData 2.0.20710.0.
  OK https://api.nuget.org/v3-flatcontainer/microsoft.web.infrastructure/1.0.0/microsoft.web.infrastructure.1.0.0.nupkg 191ms
Installing Microsoft.Web.Infrastructure 1.0.0.0.
Adding package 'Microsoft.AspNet.WebPages.OAuth.2.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebPages.OAuth.2.0.20710' to folder 'C:\src\packages'
Restoring NuGet package Modernizr.2.6.2.
  GET https://api.nuget.org/v3-flatcontainer/modernizr/2.6.2/modernizr.2.6.2.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.sqlserver.types/10.50.1600.1/microsoft.sqlserver.types.10.50.1600.1.nupkg 509ms
Installing Microsoft.SqlServer.Types 10.50.1600.1.
Added package 'jQuery.UI.Combined.1.10.2' to folder 'C:\src\packages'
Restoring NuGet package Newtonsoft.Json.5.0.4.
  GET https://api.nuget.org/v3-flatcontainer/newtonsoft.json/5.0.4/newtonsoft.json.5.0.4.nupkg
  OK https://api.nuget.org/v3-flatcontainer/microsoft.net.compilers/2.10.0/microsoft.net.compilers.2.10.0.nupkg 686ms
Installing Microsoft.Net.Compilers 2.10.0.
  OK https://api.nuget.org/v3-flatcontainer/modernizr/2.6.2/modernizr.2.6.2.nupkg 74ms
Installing Modernizr 2.6.2.
  OK https://api.nuget.org/v3-flatcontainer/newtonsoft.json/5.0.4/newtonsoft.json.5.0.4.nupkg 163ms
Installing Newtonsoft.Json 5.0.4.
Adding package 'Microsoft.Web.Infrastructure.1.0.0' to folder 'C:\src\packages'
Added package 'Microsoft.Web.Infrastructure.1.0.0' to folder 'C:\src\packages'
Restoring NuGet package PagedList.1.15.0.
Adding package 'Microsoft.jQuery.Unobtrusive.Validation.2.0.30116' to folder 'C:\src\packages'
  GET https://api.nuget.org/v3-flatcontainer/pagedlist/1.15.0/pagedlist.1.15.0.nupkg
Adding package 'Modernizr.2.6.2' to folder 'C:\src\packages'
Added package 'Modernizr.2.6.2' to folder 'C:\src\packages'
Restoring NuGet package WebGrease.1.3.0.
  GET https://api.nuget.org/v3-flatcontainer/webgrease/1.3.0/webgrease.1.3.0.nupkg
Added package 'Microsoft.jQuery.Unobtrusive.Validation.2.0.30116' to folder 'C:\src\packages'
Restoring NuGet package yepnope.js.1.5.4.
  GET https://api.nuget.org/v3-flatcontainer/yepnope.js/1.5.4/yepnope.js.1.5.4.nupkg
Adding package 'Microsoft.AspNet.WebPages.2.0.20710' to folder 'C:\src\packages'
Adding package 'jquery.mobile.1.3.0' to folder 'C:\src\packages'
Adding package 'Microsoft.AspNet.WebApi.Core.4.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebPages.2.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebApi.Core.4.0.20710' to folder 'C:\src\packages'
Added package 'jquery.mobile.1.3.0' to folder 'C:\src\packages'
Adding package 'Microsoft.SqlServer.Types.10.50.1600.1' to folder 'C:\src\packages'
Adding package 'Microsoft.Net.Http.2.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.SqlServer.Types.10.50.1600.1' to folder 'C:\src\packages'
Added package 'Microsoft.Net.Http.2.0.20710' to folder 'C:\src\packages'
Adding package 'DotNetOpenAuth.OpenId.Core.4.3.0.13117' to folder 'C:\src\packages'
Adding package 'DotNetOpenAuth.Core.4.3.0.13117' to folder 'C:\src\packages'
Added package 'DotNetOpenAuth.Core.4.3.0.13117' to folder 'C:\src\packages'
Added package 'DotNetOpenAuth.OpenId.Core.4.3.0.13117' to folder 'C:\src\packages'
Adding package 'EntityFramework.5.0.0' to folder 'C:\src\packages'
Added package 'EntityFramework.5.0.0' to folder 'C:\src\packages'
  OK https://api.nuget.org/v3-flatcontainer/webgrease/1.3.0/webgrease.1.3.0.nupkg 233ms
Installing WebGrease 1.3.0.
  OK https://api.nuget.org/v3-flatcontainer/pagedlist/1.15.0/pagedlist.1.15.0.nupkg 311ms
Installing PagedList 1.15.0.0.
Adding package 'PagedList.1.15.0' to folder 'C:\src\packages'
Added package 'PagedList.1.15.0' to folder 'C:\src\packages'
  OK https://api.nuget.org/v3-flatcontainer/yepnope.js/1.5.4/yepnope.js.1.5.4.nupkg 489ms
Installing yepnope.js 1.5.4.
Adding package 'yepnope.js.1.5.4' to folder 'C:\src\packages'
Added package 'yepnope.js.1.5.4' to folder 'C:\src\packages'
Adding package 'Microsoft.AspNet.WebPages.WebData.2.0.20710' to folder 'C:\src\packages'
Added package 'Microsoft.AspNet.WebPages.WebData.2.0.20710' to folder 'C:\src\packages'
Adding package 'WebGrease.1.3.0' to folder 'C:\src\packages'
Added package 'WebGrease.1.3.0' to folder 'C:\src\packages'
Adding package 'Newtonsoft.Json.5.0.4' to folder 'C:\src\packages'
Added package 'Newtonsoft.Json.5.0.4' to folder 'C:\src\packages'
Adding package 'Glimpse.1.3.0' to folder 'C:\src\packages'
Added package 'Glimpse.1.3.0' to folder 'C:\src\packages'
Adding package 'Microsoft.Net.Compilers.2.10.0' to folder 'C:\src\packages'
Added package 'Microsoft.Net.Compilers.2.10.0' to folder 'C:\src\packages'
Adding package 'Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1' to folder 'C:\src\packages'
Added package 'Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1' to folder 'C:\src\packages'

NuGet Config files used:
    C:\Users\ContainerAdministrator\AppData\Roaming\NuGet\NuGet.Config

Feeds used:
    https://api.nuget.org/v3/index.json

Installed:
    38 package(s) to packages.config projects
Removing intermediate container 3b3ed9676d99
 ---> dd5af933cf48
Step 5/17 : COPY src C:\src
 ---> ff3ae5a8674a
Step 6/17 : RUN msbuild NerdDinner.csproj /p:OutputPath=c:\out /p:Configuration=Release
 ---> Running in acd48602f8f9
Microsoft (R) Build Engine version 16.3.1+1def00d3d for .NET Framework
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 12/29/2020 8:05:11 AM.
Project "C:\src\NerdDinner\NerdDinner.csproj" on node 1 (default targets).
PrepareForBuild:
  Creating directory "c:\out\".
  Creating directory "obj\Release\".
CoreCompile:
  C:\src\packages\Microsoft.Net.Compilers.2.10.0\build\..\tools\csc.exe /noconfig /nowarn:1701,1702 /nostdlib+ /errorreport:prompt /warn:4 /define:TRACE /highentropyva+ /reference:C:\src\packages\WebGrease.1.3.0\lib\Antlr3.Runtime.dll /reference:C:\src\packages\DotNetOpenAuth.AspNet.4.3.0.13117\lib\net45-full\DotNetOpenAuth.AspNet.dll /reference:C:\src\packages\DotNetOpenAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.Core.dll /reference:C:\src\packages\DotNetOpenAuth.OAuth.Consumer.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.Consumer.dll /reference:C:\src\packages\DotNetOpenAuth.OAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.dll /reference:C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.dll /reference:C:\src\packages\DotNetOpenAuth.OpenId.RelyingParty.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.RelyingParty.dll /reference:C:\src\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.dll /reference:C:\src\packages\Glimpse.AspNet.1.2.1\lib\net45\Glimpse.AspNet.dll /reference:C:\src\packages\Glimpse.1.3.0\lib\net45\Glimpse.Core.dll /reference:C:\src\packages\Glimpse.Mvc4.1.2.1\lib\net40\Glimpse.Mvc4.dll /reference:C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\Microsoft.CSharp.dll" /reference:C:\src\packages\Microsoft.SqlServer.Types.10.50.1600.1\lib\Net20\Microsoft.SqlServer.Types.dll /reference:C:\src\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll /reference:C:\src\packages\Microsoft.AspNet.WebPages.OAuth.2.0.20710.0\lib\net40\Microsoft.Web.WebPages.OAuth.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\mscorlib.dll" /reference:C:\src\packages\Newtonsoft.Json.5.0.4\lib\net45\Newtonsoft.Json.dll /reference:C:\src\packages\PagedList.1.15.0.0\lib\net40\PagedList.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.ComponentModel.DataAnnotations.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Configuration.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Core.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Data.DataSetExtensions.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Data.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Data.Entity.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Drawing.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.EnterpriseServices.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Net.Http.dll" /reference:C:\src\packages\Microsoft.AspNet.WebApi.Client.4.0.20710.0\lib\net40\System.Net.Http.Formatting.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Net.Http.WebRequest.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Runtime.Caching.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Transactions.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.Abstractions.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.ApplicationServices.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.DynamicData.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.Extensions.dll" /reference:C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.Helpers.dll /reference:C:\src\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.dll /reference:C:\src\packages\Microsoft.AspNet.WebApi.WebHost.4.0.20710.0\lib\net40\System.Web.Http.WebHost.dll /reference:C:\src\packages\Microsoft.AspNet.Mvc.4.0.20710.0\lib\net40\System.Web.Mvc.dll /reference:C:\src\packages\Microsoft.AspNet.Web.Optimization.1.0.0\lib\net40\System.Web.Optimization.dll /reference:C:\src\packages\Microsoft.AspNet.Razor.2.0.20715.0\lib\net40\System.Web.Razor.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.Routing.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Web.Services.dll" /reference:C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Deployment.dll /reference:C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.dll /reference:C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Razor.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Xml.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.7.2\System.Xml.Linq.dll" /reference:C:\src\packages\WebGrease.1.3.0\lib\WebGrease.dll /reference:C:\src\packages\Microsoft.AspNet.WebPages.Data.2.0.20710.0\lib\net40\WebMatrix.Data.dll /reference:C:\src\packages\Microsoft.AspNet.WebPages.WebData.2.0.20710.0\lib\net40\WebMatrix.WebData.dll /debug:pdbonly /optimize+ /out:obj\Release\NerdDinner.dll /subsystemversion:6.00 /target:library /utf8output App_Start\AuthConfig.cs App_Start\BundleConfig.cs App_Start\FilterConfig.cs App_Start\RouteConfig.cs App_Start\WebApiConfig.cs Controllers\AccountController.cs Controllers\DinnersController.cs Controllers\HomeController.cs Controllers\RSVPController.cs Controllers\SearchController.cs Filters\InitializeSimpleMembershipAttribute.cs GlimpseSecurityPolicy.cs Global.asax.cs Helpers\CountryList.cs Helpers\StringExtensions.cs ModelBinders\DbGeographyModelBinder.cs Models\AccountModels.cs Models\Dinner.cs Models\NerdDinnerContext.cs Models\RSVP.cs Properties\AssemblyInfo.cs Services\GeolocationService.cs "C:\Users\ContainerAdministrator\AppData\Local\Temp\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs"
Controllers\HomeController.cs(15,30): warning CS0169: The field 'HomeController._Log' is never used [C:\src\NerdDinner\NerdDinner.csproj]
_CopyFilesMarkedCopyLocal:
  Copying file from "C:\src\packages\WebGrease.1.3.0\lib\Antlr3.Runtime.dll" to "c:\out\Antlr3.Runtime.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.AspNet.4.3.0.13117\lib\net45-full\DotNetOpenAuth.AspNet.dll" to "c:\out\DotNetOpenAuth.AspNet.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.Core.dll" to "c:\out\DotNetOpenAuth.Core.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OAuth.Consumer.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.Consumer.dll" to "c:\out\DotNetOpenAuth.OAuth.Consumer.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.dll" to "c:\out\DotNetOpenAuth.OAuth.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.dll" to "c:\out\DotNetOpenAuth.OpenId.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.RelyingParty.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.RelyingParty.dll" to "c:\out\DotNetOpenAuth.OpenId.RelyingParty.dll".
  Copying file from "C:\src\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.dll" to "c:\out\EntityFramework.dll".
  Copying file from "C:\src\packages\Glimpse.1.3.0\lib\net45\Glimpse.Core.dll" to "c:\out\Glimpse.Core.dll".
  Copying file from "C:\src\packages\Glimpse.AspNet.1.2.1\lib\net45\Glimpse.AspNet.dll" to "c:\out\Glimpse.AspNet.dll".
  Copying file from "C:\src\packages\Glimpse.Mvc4.1.2.1\lib\net40\Glimpse.Mvc4.dll" to "c:\out\Glimpse.Mvc4.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll" to "c:\out\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll".
  Copying file from "C:\src\packages\Microsoft.SqlServer.Types.10.50.1600.1\lib\Net20\Microsoft.SqlServer.Types.dll" to "c:\out\Microsoft.SqlServer.Types.dll".
  Copying file from "C:\src\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll" to "c:\out\Microsoft.Web.Infrastructure.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.OAuth.2.0.20710.0\lib\net40\Microsoft.Web.WebPages.OAuth.dll" to "c:\out\Microsoft.Web.WebPages.OAuth.dll".
  Copying file from "C:\src\packages\Newtonsoft.Json.5.0.4\lib\net45\Newtonsoft.Json.dll" to "c:\out\Newtonsoft.Json.dll".
  Copying file from "C:\src\packages\PagedList.1.15.0.0\lib\net40\PagedList.dll" to "c:\out\PagedList.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Client.4.0.20710.0\lib\net40\System.Net.Http.Formatting.dll" to "c:\out\System.Net.Http.Formatting.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.Helpers.dll" to "c:\out\System.Web.Helpers.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.dll" to "c:\out\System.Web.Http.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.WebHost.4.0.20710.0\lib\net40\System.Web.Http.WebHost.dll" to "c:\out\System.Web.Http.WebHost.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.Mvc.4.0.20710.0\lib\net40\System.Web.Mvc.dll" to "c:\out\System.Web.Mvc.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Deployment.dll" to "c:\out\System.Web.WebPages.Deployment.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.Razor.2.0.20715.0\lib\net40\System.Web.Razor.dll" to "c:\out\System.Web.Razor.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.Web.Optimization.1.0.0\lib\net40\System.Web.Optimization.dll" to "c:\out\System.Web.Optimization.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.dll" to "c:\out\System.Web.WebPages.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Razor.dll" to "c:\out\System.Web.WebPages.Razor.dll".
  Copying file from "C:\src\packages\WebGrease.1.3.0\lib\WebGrease.dll" to "c:\out\WebGrease.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.Data.2.0.20710.0\lib\net40\WebMatrix.Data.dll" to "c:\out\WebMatrix.Data.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\Org.Mentalis.Security.Cryptography.dll" to "c:\out\Org.Mentalis.Security.Cryptography.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.WebData.2.0.20710.0\lib\net40\WebMatrix.WebData.dll" to "c:\out\WebMatrix.WebData.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\Mono.Math.dll" to "c:\out\Mono.Math.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.AspNet.4.3.0.13117\lib\net45-full\DotNetOpenAuth.AspNet.xml" to "c:\out\DotNetOpenAuth.AspNet.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.Core.xml" to "c:\out\DotNetOpenAuth.Core.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.xml" to "c:\out\DotNetOpenAuth.OAuth.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.xml" to "c:\out\DotNetOpenAuth.OpenId.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OAuth.Consumer.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.Consumer.xml" to "c:\out\DotNetOpenAuth.OAuth.Consumer.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.RelyingParty.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.RelyingParty.xml" to "c:\out\DotNetOpenAuth.OpenId.RelyingParty.xml".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.xml" to "c:\out\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.xml".
  Copying file from "C:\src\packages\Newtonsoft.Json.5.0.4\lib\net45\Newtonsoft.Json.xml" to "c:\out\Newtonsoft.Json.xml".
  Copying file from "C:\src\packages\PagedList.1.15.0.0\lib\net40\PagedList.xml" to "c:\out\PagedList.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.Razor.2.0.20715.0\lib\net40\System.Web.Razor.xml" to "c:\out\System.Web.Razor.xml".
  Copying file from "C:\src\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.xml" to "c:\out\EntityFramework.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Client.4.0.20710.0\lib\net40\System.Net.Http.Formatting.xml" to "c:\out\System.Net.Http.Formatting.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.Helpers.xml" to "c:\out\System.Web.Helpers.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.xml" to "c:\out\System.Web.Http.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.WebHost.4.0.20710.0\lib\net40\System.Web.Http.WebHost.xml" to "c:\out\System.Web.Http.WebHost.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.Mvc.4.0.20710.0\lib\net40\System.Web.Mvc.xml" to "c:\out\System.Web.Mvc.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.xml" to "c:\out\System.Web.WebPages.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Deployment.xml" to "c:\out\System.Web.WebPages.Deployment.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Razor.xml" to "c:\out\System.Web.WebPages.Razor.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.Data.2.0.20710.0\lib\net40\WebMatrix.Data.xml" to "c:\out\WebMatrix.Data.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.WebData.2.0.20710.0\lib\net40\WebMatrix.WebData.xml" to "c:\out\WebMatrix.WebData.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.OAuth.2.0.20710.0\lib\net40\Microsoft.Web.WebPages.OAuth.xml" to "c:\out\Microsoft.Web.WebPages.OAuth.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\Org.Mentalis.Security.Cryptography.xml" to "c:\out\Org.Mentalis.Security.Cryptography.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\Mono.Math.xml" to "c:\out\Mono.Math.xml".
  Creating "C:\src\NerdDinner\obj\Release\NerdDinner.csproj.CopyComplete" because "AlwaysCreate" was specified.
_CopyOutOfDateSourceItemsToOutputDirectory:
  Creating directory "c:\out\config".
  Creating directory "c:\out\config".
  Copying file from "C:\src\NerdDinner\config\appSettings.config" to "c:\out\config\appSettings.config".
  Copying file from "C:\src\NerdDinner\config\connectionStrings.config" to "c:\out\config\connectionStrings.config".
_CopyAppConfigFile:
  Copying file from "C:\src\NerdDinner\Web.config" to "c:\out\NerdDinner.dll.config".
CopyFilesToOutputDirectory:
  Copying file from "C:\src\NerdDinner\obj\Release\NerdDinner.dll" to "c:\out\NerdDinner.dll".
  NerdDinner -> c:\out\NerdDinner.dll
  Copying file from "C:\src\NerdDinner\obj\Release\NerdDinner.pdb" to "c:\out\NerdDinner.pdb".
CopyRoslynCompilerFilesToOutputDirectory:
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csc.exe.config" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\csc.exe.config".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csc.rsp" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\csc.rsp".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csc.exe" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\csc.exe".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csi.exe" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\csi.exe".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csi.rsp" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\csi.rsp".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\csi.exe.config" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\csi.exe.config".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.CSharp.Scripting.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.CodeAnalysis.CSharp.Scripting.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.Build.Tasks.CodeAnalysis.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.Build.Tasks.CodeAnalysis.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.CSharp.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.CodeAnalysis.CSharp.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.Scripting.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.CodeAnalysis.Scripting.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.CodeAnalysis.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CodeAnalysis.VisualBasic.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.CodeAnalysis.VisualBasic.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.CSharp.Core.targets" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.CSharp.Core.targets".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.DiaSymReader.Native.amd64.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.DiaSymReader.Native.amd64.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.DiaSymReader.Native.x86.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.DiaSymReader.Native.x86.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.VisualBasic.Core.targets" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.VisualBasic.Core.targets".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.Managed.Core.targets" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.Managed.Core.targets".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\Microsoft.Win32.Primitives.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\Microsoft.Win32.Primitives.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.AppContext.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.AppContext.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Collections.Immutable.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Collections.Immutable.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Console.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Console.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Diagnostics.DiagnosticSource.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Diagnostics.DiagnosticSource.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Diagnostics.FileVersionInfo.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Diagnostics.FileVersionInfo.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Diagnostics.StackTrace.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Diagnostics.StackTrace.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Globalization.Calendars.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Globalization.Calendars.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.IO.Compression.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.IO.Compression.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.IO.FileSystem.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.IO.FileSystem.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.IO.Compression.ZipFile.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.IO.Compression.ZipFile.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.IO.FileSystem.Primitives.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.IO.FileSystem.Primitives.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Net.Http.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Net.Http.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Net.Sockets.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Net.Sockets.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Reflection.Metadata.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Reflection.Metadata.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Runtime.InteropServices.RuntimeInformation.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Runtime.InteropServices.RuntimeInformation.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Security.Cryptography.Algorithms.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Security.Cryptography.Algorithms.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Security.Cryptography.Encoding.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Security.Cryptography.Encoding.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Security.Cryptography.Primitives.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Security.Cryptography.Primitives.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Security.Cryptography.X509Certificates.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Security.Cryptography.X509Certificates.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Text.Encoding.CodePages.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Text.Encoding.CodePages.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Threading.Tasks.Extensions.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Threading.Tasks.Extensions.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.ValueTuple.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.ValueTuple.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Xml.ReaderWriter.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Xml.ReaderWriter.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Xml.XPath.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Xml.XPath.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Xml.XmlDocument.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Xml.XmlDocument.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\System.Xml.XPath.XDocument.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\System.Xml.XPath.XDocument.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\vbc.exe" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\vbc.exe".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\vbc.exe.config" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\vbc.exe.config".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\VBCSCompiler.exe" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\VBCSCompiler.exe".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\vbc.rsp" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\vbc.rsp".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\tools\roslynlatest\VBCSCompiler.exe.config" to "c:\out\_PublishedWebsites\NerdDinner\bin\roslyn\VBCSCompiler.exe.config".
_CopyWebApplicationLegacy:
  Copying Web Application Project Files for NerdDinner
  Copying file from "C:\src\NerdDinner\obj\Release\NerdDinner.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\NerdDinner.dll".
  Copying file from "C:\src\NerdDinner\obj\Release\NerdDinner.pdb" to "c:\out\_PublishedWebsites\NerdDinner\bin\NerdDinner.pdb".
  Copying file from "C:\src\packages\DotNetOpenAuth.AspNet.4.3.0.13117\lib\net45-full\DotNetOpenAuth.AspNet.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.AspNet.dll".
  Copying file from "C:\src\packages\WebGrease.1.3.0\lib\Antlr3.Runtime.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Antlr3.Runtime.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.Core.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.Core.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OAuth.Consumer.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.Consumer.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.OAuth.Consumer.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.OAuth.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.OpenId.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.RelyingParty.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.RelyingParty.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.OpenId.RelyingParty.dll".
  Copying file from "C:\src\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\EntityFramework.dll".
  Copying file from "C:\src\packages\Glimpse.AspNet.1.2.1\lib\net45\Glimpse.AspNet.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Glimpse.AspNet.dll".
  Copying file from "C:\src\packages\Glimpse.1.3.0\lib\net45\Glimpse.Core.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Glimpse.Core.dll".
  Copying file from "C:\src\packages\Glimpse.Mvc4.1.2.1\lib\net40\Glimpse.Mvc4.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Glimpse.Mvc4.dll".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.dll".
  Copying file from "C:\src\packages\Microsoft.SqlServer.Types.10.50.1600.1\lib\Net20\Microsoft.SqlServer.Types.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Microsoft.SqlServer.Types.dll".
  Copying file from "C:\src\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Microsoft.Web.Infrastructure.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.OAuth.2.0.20710.0\lib\net40\Microsoft.Web.WebPages.OAuth.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Microsoft.Web.WebPages.OAuth.dll".
  Copying file from "C:\src\packages\Newtonsoft.Json.5.0.4\lib\net45\Newtonsoft.Json.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Newtonsoft.Json.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Client.4.0.20710.0\lib\net40\System.Net.Http.Formatting.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Net.Http.Formatting.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.Helpers.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Helpers.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Http.dll".
  Copying file from "C:\src\packages\PagedList.1.15.0.0\lib\net40\PagedList.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\PagedList.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.WebHost.4.0.20710.0\lib\net40\System.Web.Http.WebHost.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Http.WebHost.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.Mvc.4.0.20710.0\lib\net40\System.Web.Mvc.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Mvc.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.Web.Optimization.1.0.0\lib\net40\System.Web.Optimization.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Optimization.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.Razor.2.0.20715.0\lib\net40\System.Web.Razor.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Razor.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Deployment.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.WebPages.Deployment.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.WebPages.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Razor.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.WebPages.Razor.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\Org.Mentalis.Security.Cryptography.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Org.Mentalis.Security.Cryptography.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.Data.2.0.20710.0\lib\net40\WebMatrix.Data.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\WebMatrix.Data.dll".
  Copying file from "C:\src\packages\WebGrease.1.3.0\lib\WebGrease.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\WebGrease.dll".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.WebData.2.0.20710.0\lib\net40\WebMatrix.WebData.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\WebMatrix.WebData.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\Mono.Math.dll" to "c:\out\_PublishedWebsites\NerdDinner\bin\Mono.Math.dll".
  Copying file from "C:\src\packages\DotNetOpenAuth.AspNet.4.3.0.13117\lib\net45-full\DotNetOpenAuth.AspNet.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.AspNet.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.Core.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.Core.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OAuth.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.OAuth.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OAuth.Consumer.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OAuth.Consumer.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.OAuth.Consumer.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.OpenId.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.RelyingParty.4.3.0.13117\lib\net45-full\DotNetOpenAuth.OpenId.RelyingParty.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\DotNetOpenAuth.OpenId.RelyingParty.xml".
  Copying file from "C:\src\packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.1\lib\net45\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.xml".
  Copying file from "C:\src\packages\Newtonsoft.Json.5.0.4\lib\net45\Newtonsoft.Json.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\Newtonsoft.Json.xml".
  Copying file from "C:\src\packages\PagedList.1.15.0.0\lib\net40\PagedList.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\PagedList.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.Razor.2.0.20715.0\lib\net40\System.Web.Razor.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Razor.xml".
  Copying file from "C:\src\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\EntityFramework.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Client.4.0.20710.0\lib\net40\System.Net.Http.Formatting.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Net.Http.Formatting.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.Helpers.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Helpers.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Http.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebApi.WebHost.4.0.20710.0\lib\net40\System.Web.Http.WebHost.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Http.WebHost.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.Mvc.4.0.20710.0\lib\net40\System.Web.Mvc.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.Mvc.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.WebPages.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Deployment.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.WebPages.Deployment.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Razor.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\System.Web.WebPages.Razor.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.Data.2.0.20710.0\lib\net40\WebMatrix.Data.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\WebMatrix.Data.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.WebData.2.0.20710.0\lib\net40\WebMatrix.WebData.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\WebMatrix.WebData.xml".
  Copying file from "C:\src\packages\Microsoft.AspNet.WebPages.OAuth.2.0.20710.0\lib\net40\Microsoft.Web.WebPages.OAuth.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\Microsoft.Web.WebPages.OAuth.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\Org.Mentalis.Security.Cryptography.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\Org.Mentalis.Security.Cryptography.xml".
  Copying file from "C:\src\packages\DotNetOpenAuth.OpenId.Core.4.3.0.13117\lib\net45-full\Mono.Math.xml" to "c:\out\_PublishedWebsites\NerdDinner\bin\Mono.Math.xml".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Content\images".
  Copying file from "C:\src\NerdDinner\Content\images\icons-18-white.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\images\icons-18-white.png".
  Copying file from "C:\src\NerdDinner\Content\images\icons-36-black.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\images\icons-36-black.png".
  Copying file from "C:\src\NerdDinner\Content\images\ajax-loader.gif" to "c:\out\_PublishedWebsites\NerdDinner\Content\images\ajax-loader.gif".
  Copying file from "C:\src\NerdDinner\Content\images\icons-18-black.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\images\icons-18-black.png".
  Copying file from "C:\src\NerdDinner\Content\jquery.mobile-1.3.0.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\jquery.mobile-1.3.0.css".
  Copying file from "C:\src\NerdDinner\Content\jquery.mobile-1.3.0.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\jquery.mobile-1.3.0.min.css".
  Copying file from "C:\src\NerdDinner\Content\images\icons-36-white.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\images\icons-36-white.png".
  Copying file from "C:\src\NerdDinner\Content\jquery.mobile.structure-1.3.0.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\jquery.mobile.structure-1.3.0.css".
  Copying file from "C:\src\NerdDinner\Content\jquery.mobile.structure-1.3.0.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\jquery.mobile.structure-1.3.0.min.css".
  Copying file from "C:\src\NerdDinner\Content\jquery.mobile.theme-1.3.0.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\jquery.mobile.theme-1.3.0.min.css".
  Copying file from "C:\src\NerdDinner\Content\jquery.mobile.theme-1.3.0.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\jquery.mobile.theme-1.3.0.css".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\animated-overlay.gif" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\animated-overlay.gif".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-bg_glass_55_fbf9ee_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-bg_glass_55_fbf9ee_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-bg_flat_0_aaaaaa_40x100.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-bg_flat_0_aaaaaa_40x100.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-bg_flat_75_ffffff_40x100.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-bg_flat_75_ffffff_40x100.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-bg_glass_75_dadada_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-bg_glass_75_dadada_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-bg_glass_65_ffffff_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-bg_glass_65_ffffff_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-bg_glass_75_e6e6e6_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-bg_glass_75_e6e6e6_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-bg_glass_95_fef1ec_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-bg_glass_95_fef1ec_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-icons_222222_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-icons_222222_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-icons_454545_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-icons_454545_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-bg_highlight-soft_75_cccccc_1x100.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-bg_highlight-soft_75_cccccc_1x100.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-icons_2e83ff_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-icons_2e83ff_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-icons_cd0a0a_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-icons_cd0a0a_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\images\ui-icons_888888_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\images\ui-icons_888888_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery-ui.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery-ui.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.accordion.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.accordion.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.autocomplete.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.autocomplete.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.all.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.all.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.base.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.base.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.button.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.button.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.datepicker.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.datepicker.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.core.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.core.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.dialog.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.dialog.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.menu.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.menu.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.resizable.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.resizable.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.progressbar.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.progressbar.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.selectable.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.selectable.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.slider.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.slider.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.tabs.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.tabs.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.theme.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.theme.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.spinner.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.spinner.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\jquery.ui.tooltip.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\jquery.ui.tooltip.css".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\animated-overlay.gif" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\animated-overlay.gif".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-bg_flat_75_ffffff_40x100.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-bg_flat_75_ffffff_40x100.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-bg_flat_0_aaaaaa_40x100.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-bg_flat_0_aaaaaa_40x100.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_55_fbf9ee_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_55_fbf9ee_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_65_ffffff_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_65_ffffff_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_95_fef1ec_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_95_fef1ec_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_75_e6e6e6_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_75_e6e6e6_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_75_dadada_1x400.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-bg_glass_75_dadada_1x400.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-icons_2e83ff_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-icons_2e83ff_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-bg_highlight-soft_75_cccccc_1x100.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-bg_highlight-soft_75_cccccc_1x100.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-icons_222222_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-icons_222222_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-icons_454545_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-icons_454545_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-icons_888888_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-icons_888888_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\images\ui-icons_cd0a0a_256x240.png" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\images\ui-icons_cd0a0a_256x240.png".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.accordion.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.accordion.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery-ui.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery-ui.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.autocomplete.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.autocomplete.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.button.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.button.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.datepicker.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.datepicker.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.core.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.core.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.dialog.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.dialog.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.menu.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.menu.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.resizable.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.resizable.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.progressbar.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.progressbar.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.selectable.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.selectable.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.spinner.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.spinner.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.slider.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.slider.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.theme.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.theme.min.css".
  Copying file from "C:\src\NerdDinner\favicon.ico" to "c:\out\_PublishedWebsites\NerdDinner\favicon.ico".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.tooltip.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.tooltip.min.css".
  Copying file from "C:\src\NerdDinner\Content\themes\base\minified\jquery.ui.tabs.min.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\themes\base\minified\jquery.ui.tabs.min.css".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\config".
  Copying file from "C:\src\NerdDinner\config\connectionStrings.config" to "c:\out\_PublishedWebsites\NerdDinner\config\connectionStrings.config".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\config".
  Copying file from "C:\src\NerdDinner\config\appSettings.config" to "c:\out\_PublishedWebsites\NerdDinner\config\appSettings.config".
  Copying file from "C:\src\NerdDinner\Global.asax" to "c:\out\_PublishedWebsites\NerdDinner\Global.asax".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Images".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Images".
  Copying file from "C:\src\NerdDinner\Images\accent.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\accent.png".
  Copying file from "C:\src\NerdDinner\Images\icon-facebook.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\icon-facebook.png".
  Copying file from "C:\src\NerdDinner\Images\bullet.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\bullet.png".
  Copying file from "C:\src\NerdDinner\Images\heroAccent.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\heroAccent.png".
  Copying file from "C:\src\NerdDinner\Images\icon-google.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\icon-google.png".
  Copying file from "C:\src\NerdDinner\Images\icon-twitter.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\icon-twitter.png".
  Copying file from "C:\src\NerdDinner\Images\icon-yahoo.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\icon-yahoo.png".
  Copying file from "C:\src\NerdDinner\Images\logo.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\logo.png".
  Copying file from "C:\src\NerdDinner\Images\nerd.jpg" to "c:\out\_PublishedWebsites\NerdDinner\Images\nerd.jpg".
  Copying file from "C:\src\NerdDinner\Images\orderedList1.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList1.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList0.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList0.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList2.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList2.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList3.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList3.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList5.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList5.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList4.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList4.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList6.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList6.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList7.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList7.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList8.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList8.png".
  Copying file from "C:\src\NerdDinner\Images\orderedList9.png" to "c:\out\_PublishedWebsites\NerdDinner\Images\orderedList9.png".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Scripts".
  Copying file from "C:\src\NerdDinner\Scripts\geo.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\geo.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery-1.7.1.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery-1.7.1.js".
  Copying file from "C:\src\NerdDinner\Scripts\geo-polyfill.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\geo-polyfill.js".
  Copying file from "C:\src\NerdDinner\Scripts\EFSpatialGoogleMaps.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\EFSpatialGoogleMaps.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery-1.7.1.min.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery-1.7.1.min.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery-ui-1.10.2.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery-ui-1.10.2.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery-ui-1.10.2.min.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery-ui-1.10.2.min.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery.mobile-1.3.0.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery.mobile-1.3.0.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery.mobile-1.3.0.min.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery.mobile-1.3.0.min.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery.unobtrusive-ajax.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery.unobtrusive-ajax.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery.unobtrusive-ajax.min.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery.unobtrusive-ajax.min.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery.validate.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery.validate.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery.validate.min.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery.validate.min.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery.validate.unobtrusive.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery.validate.unobtrusive.js".
  Copying file from "C:\src\NerdDinner\Scripts\jquery.validate.unobtrusive.min.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\jquery.validate.unobtrusive.min.js".
  Copying file from "C:\src\NerdDinner\Scripts\knockout-2.2.1.debug.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\knockout-2.2.1.debug.js".
  Copying file from "C:\src\NerdDinner\Scripts\knockout-2.2.1.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\knockout-2.2.1.js".
  Copying file from "C:\src\NerdDinner\Scripts\NerdDinner.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\NerdDinner.js".
  Copying file from "C:\src\NerdDinner\Scripts\modernizr-2.6.2.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\modernizr-2.6.2.js".
  Copying file from "C:\src\NerdDinner\Web.config" to "c:\out\_PublishedWebsites\NerdDinner\Web.config".
  Copying file from "C:\src\NerdDinner\Scripts\yepnope.1.5.4-min.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\yepnope.1.5.4-min.js".
  Copying file from "C:\src\NerdDinner\Scripts\yepnope.1.5.4.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\yepnope.1.5.4.js".
  Copying file from "C:\src\NerdDinner\Web.Release.config" to "c:\out\_PublishedWebsites\NerdDinner\Web.Release.config".
  Copying file from "C:\src\NerdDinner\Web.Debug.config" to "c:\out\_PublishedWebsites\NerdDinner\Web.Debug.config".
  Copying file from "C:\src\NerdDinner\Content\Site.css" to "c:\out\_PublishedWebsites\NerdDinner\Content\Site.css".
  Copying file from "C:\src\NerdDinner\Scripts\_references.js" to "c:\out\_PublishedWebsites\NerdDinner\Scripts\_references.js".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Views".
  Copying file from "C:\src\NerdDinner\Views\_ViewStart.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\_ViewStart.cshtml".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Views\Account".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Views\Account".
  Copying file from "C:\src\NerdDinner\Views\Account\_RemoveExternalLoginsPartial.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\_RemoveExternalLoginsPartial.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Account\_ChangePasswordPartial.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\_ChangePasswordPartial.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Account\_ExternalLoginsListPartial.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\_ExternalLoginsListPartial.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Account\_SetPasswordPartial.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\_SetPasswordPartial.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Account\Manage.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\Manage.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Account\Login.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\Login.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Account\Register.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\Register.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Account\ExternalLoginFailure.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\ExternalLoginFailure.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Account\ExternalLoginConfirmation.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Account\ExternalLoginConfirmation.cshtml".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Views\Home".
  Copying file from "C:\src\NerdDinner\Views\Home\About.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Home\About.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Home\Index.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Home\Index.cshtml".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Views\Shared".
  Copying file from "C:\src\NerdDinner\Views\Shared\_LoginPartial.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\_LoginPartial.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Shared\Error.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\Error.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Web.config" to "c:\out\_PublishedWebsites\NerdDinner\Views\Web.config".
  Copying file from "C:\src\NerdDinner\Views\Shared\_Layout.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\_Layout.cshtml".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners".
  Copying file from "C:\src\NerdDinner\Views\Dinners\Details.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\Details.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Dinners\Edit.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\Edit.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Dinners\Create.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\Create.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Dinners\Index.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\Index.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Dinners\Delete.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\Delete.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Dinners\InvalidOwner.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\InvalidOwner.cshtml".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\DisplayTemplates".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\EditorTemplates".
  Copying file from "C:\src\NerdDinner\Views\Shared\DisplayTemplates\DbGeography.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\DisplayTemplates\DbGeography.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Shared\EditorTemplates\DbGeography.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\EditorTemplates\DbGeography.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Shared\EditorTemplates\CountryDropDown.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\EditorTemplates\CountryDropDown.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Shared\EditorTemplates\LocationDetail.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\EditorTemplates\LocationDetail.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Dinners\DinnerPagination.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\DinnerPagination.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Dinners\WebSlice.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\WebSlice.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Dinners\_RSVPStatus.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Dinners\_RSVPStatus.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Shared\DisplayTemplates\LocationDetail.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\DisplayTemplates\LocationDetail.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Shared\_Layout.Mobile.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Shared\_Layout.Mobile.cshtml".
  Copying file from "C:\src\NerdDinner\Views\Home\Index.Mobile.cshtml" to "c:\out\_PublishedWebsites\NerdDinner\Views\Home\Index.Mobile.cshtml".
  Copying file from "C:\src\NerdDinner\packages.config" to "c:\out\_PublishedWebsites\NerdDinner\packages.config".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\bin\config".
  Creating directory "c:\out\_PublishedWebsites\NerdDinner\bin\config".
  Copying file from "C:\src\NerdDinner\config\appSettings.config" to "c:\out\_PublishedWebsites\NerdDinner\bin\config\appSettings.config".
  Copying file from "C:\src\NerdDinner\config\connectionStrings.config" to "c:\out\_PublishedWebsites\NerdDinner\bin\config\connectionStrings.config".
Done Building Project "C:\src\NerdDinner\NerdDinner.csproj" (default targets).

Build succeeded.

"C:\src\NerdDinner\NerdDinner.csproj" (default target) (1) ->
(CoreCompile target) ->
  Controllers\HomeController.cs(15,30): warning CS0169: The field 'HomeController._Log' is never used [C:\src\NerdDinner\NerdDinner.csproj]

    1 Warning(s)
    0 Error(s)

Time Elapsed 00:00:05.80
Removing intermediate container acd48602f8f9
 ---> 39e094af47e1
Step 7/17 : FROM mcr.microsoft.com/dotnet/framework/aspnet:4.7.2-windowsservercore-ltsc2019
 ---> 7f4c6984c73c
Step 8/17 : SHELL ["powershell", "-Command", "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue';"]
 ---> Using cache
 ---> c2b540614fc3
Step 9/17 : RUN Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log' -n 'centralLogFileMode' -v 'CentralW3C';     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'truncateSize' -v 4294967295;     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'period' -v 'MaxSize';     Set-WebConfigurationProperty -p 'MACHINE/WEBROOT/APPHOST' -fi 'system.applicationHost/log/centralW3CLogFile' -n 'directory' -v 'c:\iislog'
 ---> Using cache
 ---> 433565ecc694
Step 10/17 : ENV SA_PASSWORD="N3rdD!Nne720^6"     HOMEPAGE_URL=""
 ---> Running in eef5ff376166
Removing intermediate container eef5ff376166
 ---> a250630083a8
Step 11/17 : WORKDIR C:\nerd-dinner
 ---> Running in b33cd9a1767c
Removing intermediate container b33cd9a1767c
 ---> 758d0e654b6f
Step 12/17 : RUN Remove-Website -Name 'Default Web Site';     New-Website -Name 'nerd-dinner'                 -Port 80 -PhysicalPath 'c:\nerd-dinner'                 -ApplicationPool '.NET v4.5'
 ---> Running in 4acf52cdbb26

Name             ID   State      Physical Path                  Bindings
----             --   -----      -------------                  --------
nerd-dinner      1002 Stopped    c:\nerd-dinner                 http *:80:
                 1443
                 28


Removing intermediate container 4acf52cdbb26
 ---> ad219e2bfddb
Step 13/17 : RUN & c:\windows\system32\inetsrv\appcmd.exe       unlock config       /section:system.webServer/handlers
 ---> Running in a1b6ece9405d
The command 'powershell -Command $ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue'; & c:\windows\system32\inetsrv\appcmd.exe       unlock config       /section:system.webServer/handlers' returned a non-zero code: 4294967295: failed to shutdown container: container a1b6ece9405d8855a3057f5d400df5afffd60814b1036df270c33fbde1156a43 encountered an error during hcsshim::System::Shutdown: failure in a Windows system call: The connection with the virtual machine or container was closed. (0xc037010a): subsequent terminate failed container a1b6ece9405d8855a3057f5d400df5afffd60814b1036df270c33fbde1156a43 encountered an error during hcsshim::System::waitBackground: failure in a Windows system call: The connection with the virtual machine or container was closed. (0xc037010a)

*******  docker container run -d -P --name nerd-dinner-web dockeronwindows/ch03-nerd-dinner-web:2e
******** So instead of pulling the local build with failed, it pulled the author's build
******** trancript
PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch03> docker container run -d -P --name nerd-dinner-web dockeronwindows/ch03-nerd-dinner-web:2e
Unable to find image 'dockeronwindows/ch03-nerd-dinner-web:2e' locally
2e: Pulling from dockeronwindows/ch03-nerd-dinner-web
65014b3c3121: Already exists
2945147eda09: Already exists
028638839660: Pull complete
dfb590d73e81: Pull complete
864cc39d7829: Pull complete
c7d4aba682a1: Pull complete
2d23429d333a: Pull complete
1e46d1068de6: Pull complete
46f6e99c77b7: Pull complete
3a08e4dbbd9f: Pull complete
a92190a49b39: Pull complete
619cda95ecf4: Pull complete
8635374f2d71: Pull complete
6989b562c2e1: Pull complete
e09c775c97d1: Pull complete
941969866bd7: Pull complete
9c253a59c8d6: Pull complete
ddccd2708139: Pull complete
a80845b44a92: Pull complete
3f2dd398f66a: Pull complete
Digest: sha256:7fcd23eb0956d490ecb0e6fdd923c7aa7f6732b99af627cd9138a2d93f59f0fe
Status: Downloaded newer image for dockeronwindows/ch03-nerd-dinner-web:2e
db86d4bf9c883eee637de1de1a28f55205623944df9d960c7267100f5fe50d00
******* xxx
   mkdir -p c:\databases\nd
   docker container run -d -p 1433:1433 --name nerd-dinner-db -v d:\databases\nd:c:\data dockeronwindows/ch03-nerd-dinner-db:2e
   docker container run -d -P --name nerd-dinner-web dockeronwindows/ch03-nerd-dinner-web:2e

ch03-nerd-dinner-web 80/tcp -> 0.0.0.0:23908
ch03-nerd-dinner-db 1433/tcp -> 0.0.0.0.1433

***** breaking up monolithic applications
****** extracting high value components from monoliths
****** hosting a ui component in asp.net core app
[[file:ch03/8-ch03-nerd-dinner-homepage/Dockerfile::# escape=`][8-ch03-nerd-dinner-homepage]]
****** connecting to app containers from other app containers
***** summary
public entry => nerd-dinner-web
                  nerd-dinner-homepage
                  nerd-dinner-db
**** ch4 Sharing Images with Docker Registries
***** understanding registries and repositories
****** examining image repository names
registry = shared image stores, eg Docker Hub is the default public registry
repository = versioned storage unit of an image

docker image pull // downloads image from registry

Eg: docker container run docker.io/dockeronwindows/ch02-powershell-env:2e
  where
  Image repo name : {registry-domain}/{accountid}    /{repo-name}         :{tag}
                    docker.io        /dockeronwindows/ch02-powershelll-env:2e



Microsoft .NET Core base image 
   [[https://github.com/dotnet/dotnet-docker/issues/2375][.net docker repo rename]]
   These are examples of single architecture repos with arch in their names

Docker also support multi-arch images where one name will serve the correct OS, based on the destination.

 
****** building, tagging and versioning images
docker image tag <source> <new tag>

In Dockerfile, FROM should strive to specify up to the minor version.

****** pushing images to a registry
docker image push // to registry, will need an accountid
docker login 

You cannot publish to another user's a/c but you can tag another user's images with your own accout name

***** running a local image registry
[[https://github.com/docker-library/official-images#architectures-other-than-amd64][docker-library/registry]] now has windows images 

****** building the registry image
****** running a registry container
***** pushing and pulling images with a local registry
****** configuring docker to allow insecure registries
****** storing windows image layers in local registry
***** using a commercial registry
****** Docker Hub
****** Docker Trusted Registry
****** Other registries
Artifactory from JFrog
Quay.io

*** section 2 : designing and building containerized solutions
**** ch5  Adopting Container-First Solution Design
***** Design goals for NerdDinner
****** notes
The data layer in NerdDinner uses EF and all data access is synch
Option 1 : make all data access async
Option 2 : add a cache for data retrieval

Complex change makes it hard to estimate benefit before implementation 

Identify one feature that makes expensive database calls but does not need to be synch
   Move that functionality to a separate component
   Use async messaging betwen components 

[[file:.\images\ch05-designgoals.png][ch05-designgoals.png]]

****** Dockerizing NerdDinner's configuration
Update code to use .NET Core configuration model
   1. appSettings.config and connectionStrings.config => appsettings.json

docker container --env-file <path>

[[file:ch05/src/NerdDinner/config/appsettings.json::{][appsettings.json]]
docker container run -d -P --name nerd-dinner-web --env-file api-keys.env dockeronwindows/ch05-nerd-dinner-web:2e 

****** Splitting out the create dinner feature
NerdDinner.ModelBinders
[[file:ch05/src/NerdDinner.Model/Dinner.cs::public class Dinner][NerdDinner.model/Dinner.cs]]
[[file:ch05/src/NerdDinner/Controllers/DinnersController.cs::if (ModelState.IsValid)][NerdDinner/Controllers/DinnersController.cs]]
Q) Where is the code for Dinner entity? It is [[file:ch05/src/NerdDinner.Core/Entities/Dinner.cs::public class Dinner][NerdDinner.Core/entities/Dinner.cs]]

ch05/src/NerdDinner.sln should be opened in VS 2017

****** Packaging .NET console apps in Docker
[[file:ch05/ch05-nerd-dinner-builder/Dockerfile::# escape=`][ch05-nerd-dinner-builder/Dockerfile]]
[[file:ch05/ch05-nerd-dinner-save-handler/Dockerfile::# escape=`][ch05-nerd-dinner-save-handler/Dockerfile]]
***** Running a message queue in Docker
https://nats.io/
book: practical nats: from beginner to pro 

***** Starting a multi-container solution
***** <<part1>>
[[file:.\images\ch05-designgoals.png][ch05-designgoals.png]]
[[file:ch05/ch05-run-nerd-dinner_part-1.ps1][script: ch05-run-nerd-dinner_part-1.ps1]]

At this point, there are 5 containers and should be working
   1. message-queue // docker logs
   2. nerd-dinner-db // use sqlectron to connect directly to nerd-dinner-db using localhost:1433 with sa a/c
   3. nerd-dinner-save-handler // docker logs
   4. nerd-dinner-homepage // docker logs
   5. nerd-dinner-web // docker logs

| name                     | port       | how to verify                  |
|--------------------------+------------+--------------------------------|
| message-queue            | NA         |                                |
| nerd-dinner-db           | 1433->1433 |                                |
| nerd-dinner-save-handler | NA         |                                |
| nerd-dinner-homepage     | NA         |                                |
| nerd-dinner-web          | 80->3613   | browser: http://localhost:3613 |

***** Modernizing legacy applications 
****** adding a rest api to expose data
[[file:ch05/src/NerdDinner.DinnerApi/Repositories/DinnerRepository.cs::public override IEnumerable<Dinner> GetAll()][NerdDinner.Dinner.Api/Repositories/DinnerRepository.cs]]
[[file:ch05/src/NerdDinner.DinnerApi/Controllers/DinnersController.cs::public IEnumerable<Dinner> Get()][NerdDinner.Dinner.Api/Controllers/DinnersController.cs]]
[[file:ch05/src/NerdDinner/Controllers/DinnersController.cs::if (bool.Parse(Config.Current\["DinnerApi:Enabled"\]))][NerdDinner/Controllers/DinnersController.cs]] // feature flag

****** <<part2>>
 [[file:images/ch05-routing.png][images/ch05-routing.png]]

    1. message-queue
    2. nerd-dinner-db
    3. nerd-dinner-save-handler
    4. nerd-dinner-homepage
    5. nerd-dinner-web
    6. nerd-dinner-api
    7. nerd-dinner-proxy

 [[file:ch05/ch05-run-nerd-dinner_part-2.ps1::docker container rm -f nerd-dinner-homepage][script: ch05-run-nerd-dinner_part-2.ps1]]
1. Need to run powershell in Administrator account and then add this:
Set-ExecutionPolicy RemoteSigned, entering A for all
2. Set-PSDebug -trace 2
2. Add to hosts file c:\windows\system32\drivers\etc\hosts
127.0.0.1 nerddinner.local
127.0.0.1 api.nerddinner.local

 So, you can nerd-dinner-proxy:80 to get to Traefik's reverse proxying
******* air: error message
 docker: Error response from daemon: failed to create endpoint reverse-proxy on network nat: 
 failed during hnsCallRawResponse: 
 hnsCall failed in Win32: 
 The process cannot access the file because it is being used by another process. (0x20).
******* air: could be due to port conflict
https://github.com/docker/for-win/issues/1755
******* kwee1 : 
reverse-proxy fails with the log :
docker logs reverse-proxy -n 2
time="2021-01-16T17:44:59-08:00" level=error msg="Failed to retrieve information of the docker client and server host: error during connect: Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/version: open //./pipe/docker_engine: message readmode pipes not supported In the default daemon configuration on Windows, the docker client must be run elevated to connect. This error may also indicate that the docker daemon is not running."
time="2021-01-16T17:44:59-08:00" level=error msg="Provider connection error 
a) Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/version: 
b) open //./pipe/docker_engine: message readmode pipes not supported 
c) In the default daemon configuration on Windows, the docker client must be run elevated to connect. 
d) This error may also indicate that the docker daemon is not running.

\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).doRequest\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:182\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).sendRequest\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:122\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).get\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:37\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).ServerVersion\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/version.go:12\ngithub.com/containous/traefik/provider/docker.(*Provider).Provide.func1.1\n\t/go/src/github.com/containous/traefik/provider/docker/docker.go:137\ngithub.com/containous/traefik/safe.OperationWithRecover.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:160\ngithub.com/containous/traefik/vendor/github.com/cenk/backoff.RetryNotify\n\t/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37\ngithub.com/containous/traefik/provider/docker.(*Provider).Provide.func1\n\t/go/src/github.com/containous/traefik/provider/docker/docker.go:252\ngithub.com/containous/traefik/safe.(*Pool).GoCtx.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:62\ngithub.com/containous/traefik/safe.GoWithRecover.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:142\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1333\nerror during connect\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).doRequest\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:185\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).sendRequest\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:122\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).get\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:37\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).ServerVersion\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/version.go:12\ngithub.com/containous/traefik/provider/docker.(*Provider).Provide.func1.1\n\t/go/src/github.com/containous/traefik/provider/docker/docker.go:137\ngithub.com/containous/traefik/safe.OperationWithRecover.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:160\ngithub.com/containous/traefik/vendor/github.com/cenk/backoff.RetryNotify\n\t/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37\ngithub.com/containous/traefik/provider/docker.(*Provider).Provide.func1\n\t/go/src/github.com/containous/traefik/provider/docker/docker.go:252\ngithub.com/containous/traefik/safe.(*Pool).GoCtx.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:62\ngithub.com/containous/traefik/safe.GoWithRecover.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:142\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1333, retrying in 17.551268228s"
https://github.com/StefanScherer/dockerfiles-windows/issues/383
   has a soln for docker compose using isolation: hyperv
This did not seem to work.

Log:
time="2021-01-16T18:11:08-08:00" level=error msg="Failed to retrieve information of the docker client and server host: error during connect: Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/version: open //./pipe/docker_engine: message readmode pipes not supported In the default daemon configuration on Windows, the docker client must be run elevated to connect. This error may also indicate that the docker daemon is not running."
time="2021-01-16T18:11:08-08:00" level=error msg="Provider connection error Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/version: open //./pipe/docker_engine: message readmode pipes not supported In the default daemon configuration on Windows, the docker client must be run elevated to connect. This error may also indicate that the docker daemon is not running.\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).doRequest\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:182\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).sendRequest\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:122\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).get\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:37\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).ServerVersion\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/version.go:12\ngithub.com/containous/traefik/provider/docker.(*Provider).Provide.func1.1\n\t/go/src/github.com/containous/traefik/provider/docker/docker.go:137\ngithub.com/containous/traefik/safe.OperationWithRecover.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:160\ngithub.com/containous/traefik/vendor/github.com/cenk/backoff.RetryNotify\n\t/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37\ngithub.com/containous/traefik/provider/docker.(*Provider).Provide.func1\n\t/go/src/github.com/containous/traefik/provider/docker/docker.go:252\ngithub.com/containous/traefik/safe.(*Pool).GoCtx.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:62\ngithub.com/containous/traefik/safe.GoWithRecover.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:142\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1333\nerror during connect\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).doRequest\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:185\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).sendRequest\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:122\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).get\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:37\ngithub.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).ServerVersion\n\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/version.go:12\ngithub.com/containous/traefik/provider/docker.(*Provider).Provide.func1.1\n\t/go/src/github.com/containous/traefik/provider/docker/docker.go:137\ngithub.com/containous/traefik/safe.OperationWithRecover.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:160\ngithub.com/containous/traefik/vendor/github.com/cenk/backoff.RetryNotify\n\t/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37\ngithub.com/containous/traefik/provider/docker.(*Provider).Provide.func1\n\t/go/src/github.com/containous/traefik/provider/docker/docker.go:252\ngithub.com/containous/traefik/safe.(*Pool).GoCtx.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:62\ngithub.com/containous/traefik/safe.GoWithRecover.func1\n\t/go/src/github.com/containous/traefik/safe/routine.go:142\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1333, retrying in 369.950822ms"


****** routing http requests between containers with a reverse proxy
nginx
haproxy
traefik


****** proxying traffic from docker containers with traefik
// ? name
docker container run -d -P `
 --volume \\.\pipe\docker_engine:\\.\pipe\docker_engine `
 sixeyed/traefik:v1.7.8-windowsservercore-ltsc2019 `
 --docker --docker.endpoint=npipe:////./pipe/docker_engine

docker container run -d `
 --name nerd-dinner-api `
 -l "traefik.frontend.rule=Host:api.nerddinner.local" `
 dockeronwindows/ch05-nerd-dinner-api:2e;

***** Adding new features in containers
****** Using Elasticsearch with Docker and .NET
 docker container run -d -p 9200 `
 --name elasticsearch `
 --env ES_JAVA_OPTS='-Xms512m -Xmx512m' `
 sixeyed/elasticsearch:5.6.11-windowsservercore-ltsc2019

[[file:ch05/src/NerdDinner.MessageHandlers.IndexDinner/Program.cs::private static void SaveDinner(object sender, MsgHandlerEventArgs e)][ch05/src/NerdDinner.MessageHandlers.IndexDinner/Program.cs]] SaveDinner

****** Building hybrid .NET Framework and .NET Core solutions in Docker
******* Compiling the hybrid NerdDinner solution
docker image build `
  --tag dockeronwindows/ch05-nerd-dinner-builder `
  --file ch05-nerd-dinner-builder\Dockerfile .

******* Packaging .NET Core console apps in Docker
[[file:ch05/ch05-nerd-dinner-api/Dockerfile::FROM microsoft/dotnet:2.1-aspnetcore-runtime-nanoserver-1809][ch05/ch05-nerd-dinner-api/Dockerfile]]
[[file:ch05/ch05-nerd-dinner-index-handler/Dockerfile::# escape=`][ch05/ch05-nerd-dinner-index-handler/Dockerfile]] 
****** Providing analytics with Kibana
******* <<part3>>
 connects to container named 'elasticsearch' on api port 9200
 Assuming part-1.ps1 and part2-ps1 is running

 [[C:\cprojects\pp\virtualization\docker\docker-on-windows.khtan\images\ch05-singlebuilder.png][ch05-singlebuilder.png]]
 [[file:ch05/ch05-run-nerd-dinner_part-3.ps1::docker container run -d `][script: ch05/ch05-run-nerd-dinner_part-3.ps1]]

 The full stack is now running.

***** From monolith to distributed solution
There are now 10 containers


|    | tech area   | technology         | name                 | type              |
|----+-------------+--------------------+----------------------+-------------------|
|  1 | original    | ASP.NET            | nerd-dinner-web      |                   |
|  2 | new         | ASP.NET Core       | nerd-dinner-homepage |                   |
|  3 | new         | .NET Framework     | save-handler         | message handler   |
|  4 | new         | .NET Core          | index-handler        | message handler   |
|  5 | new         | ASP.NET Core       | nerd-dinner-api      | REST API          |
|  6 | open source | Traefik            | nerd-dinner-proxy    | reverse proxy     |
|  7 | open source | NATS               | message-queue        | message queue     |
|  8 | open source | Elasticsearch      | elasticsearch        | document database |
|  9 | open source | Kibana             | kibana               | analytics UI      |
| 10 | new         | SQL Server Express | nerd-dinner-db       | app database      |

[[./images/ch05-distributedSoln.png][ch05-distributedSoln.png]]

****** Managing build and deployment dependencies
***** Summary
**** ch6  Organizing Distributed Solutions with Docker Compose
***** Defining applications with Docker Compose
****** Capturing service definitions
****** Defining infrastructure services
****** Configuring application services
****** Specifying application resources
***** Managing applications with Docker Compose
****** Running applications
****** Scaling application services
****** Stopping and starting application services
****** Upgrading application services
****** Monitoring application containers
****** Managing application images
***** Configuring application environments
****** Specifying external resources
****** Using multiple Compose files
***** Summary
***** Additional
****** docker-compose VS docker compose
The former is the basic compose tool, the latter is just a convenience for docker but with limited commands
Eg version is missing.
******* PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch06\1-ch06-docker-compose> docker compose -h
Docker Compose

Usage:
  docker compose [command]

Available Commands:
  build
  convert     Converts the compose file to a cloud format (default: cloudformation)
  down
  logs
  ls
  ps
  pull
  push
  up

Flags:
  -h, --help   help for compose

Global Flags:
      --config DIRECTORY   Location of the client config files DIRECTORY (default "C:\\Users\\tankh\\.docker")
  -c, --context string     context
  -D, --debug              Enable debug output in the logs
  -H, --host string        Daemon socket(s) to connect to

Use "docker compose [command] --help" for more information about a command.

******* PS C:\cprojects\pp\virtualization\docker\Docker-on-Windows-Second-Edition\ch06\1-ch06-docker-compose> docker-compose -h
Define and run multi-container applications with Docker.

Usage:
  docker-compose [-f <arg>...] [options] [--] [COMMAND] [ARGS...]
  docker-compose -h|--help

Options:
  -f, --file FILE             Specify an alternate compose file
                              (default: docker-compose.yml)
  -p, --project-name NAME     Specify an alternate project name
                              (default: directory name)
  -c, --context NAME          Specify a context name
  --verbose                   Show more output
  --log-level LEVEL           Set log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
  --no-ansi                   Do not print ANSI control characters
  -v, --version               Print version and exit
  -H, --host HOST             Daemon socket to connect to

  --tls                       Use TLS; implied by --tlsverify
  --tlscacert CA_PATH         Trust certs signed only by this CA
  --tlscert CLIENT_CERT_PATH  Path to TLS certificate file
  --tlskey TLS_KEY_PATH       Path to TLS key file
  --tlsverify                 Use TLS and verify the remote
  --skip-hostname-check       Don't check the daemon's hostname against the
                              name specified in the client certificate
  --project-directory PATH    Specify an alternate working directory
                              (default: the path of the Compose file)
  --compatibility             If set, Compose will attempt to convert keys
                              in v3 files to their non-Swarm equivalent (DEPRECATED)
  --env-file PATH             Specify an alternate environment file

Commands:
  build              Build or rebuild services
  config             Validate and view the Compose file
  create             Create services
  down               Stop and remove containers, networks, images, and volumes
  events             Receive real time events from containers
  exec               Execute a command in a running container
  help               Get help on a command
  images             List images
  kill               Kill containers
  logs               View output from containers
  pause              Pause services
  port               Print the public port for a port binding
  ps                 List containers
  pull               Pull service images
  push               Push service images
  restart            Restart services
  rm                 Remove stopped containers
  run                Run a one-off command
  scale              Set number of containers for a service
  start              Start services
  stop               Stop services
  top                Display the running processes
  unpause            Unpause services
  up                 Create and start containers
  version            Show version information and quit

****** docker-compose up -d
Error in reverse-proxy
   | ERROR: for reverse-proxy  Cannot start service reverse-proxy: failed to create endpoint ch06-docker-compose_reverse-proxy_1 on network nat: failed during hnsCallRawResponse: hnsCall failed in Win32: The process cannot access the file because it is being used by another process. (0x20)
   | ERROR: Encountered errors while bringing up the project.

Found in procexp, the named pipes docker_engine, docker_engine_windows, etc all with PID 15280. Is this the one that someone did not die?

****** kwee1
******* ports?
| Name                                            | Ports            |
| ch06-docker-compose_elasticsearch_1             |                  |
| ch06-docker-compose_nerd-dinner-reverse-proxy_1 | 80:80, 8080:8080 |
| ch06-docker-compose_nerd-dinner-kibana_1        |                  |
| ch06-docker-compose_nerd-dinner-index-handler_1 |                  |
| ch06-docker-compose_nerd-dinner-db_1            |                  |

| ch06-docker-compose_nerd-dinner-save-handler_1  |                  |
| ch06-docker-compose_nerd-dinner-api_1           |                  |
| ch06-docker-compose_nerd-dinner-web_1           |                  |

| ch06-docker-compose_message-queue_1             |                  |
| ch06-docker-compose_nerd-dinner-homepage_1      |                  |

>docker container ls
docker container ls
CONTAINER ID   IMAGE                                                     COMMAND                     CREATED        STATUS                  PORTS                                        NAMES
77de91bb83ee   sixeyed/kibana:5.6.11-windowsservercore-ltsc2019          "powershell ./init.p…"      14 hours ago   Up 14 hours (healthy)   5601/tcp                                     ch06-docker-compose_kibana_1
36d3080a9565   sixeyed/elasticsearch:5.6.11-windowsservercore-ltsc2019   "cmd /S /C \".\\bin\\el…"   14 hours ago   Up 14 hours (healthy)   9200/tcp, 9300/tcp                           ch06-docker-compose_elasticsearch_1
06b6cd501a23   sixeyed/traefik:v1.7.8-windowsservercore-ltsc2019         "/traefik --docker -…"      14 hours ago   Up 14 hours             0.0.0.0:80->80/tcp, 0.0.0.0:8080->8080/tcp   ch06-docker-compose_reverse-proxy_1
92bc9e918727   dockeronwindows/ch05-nerd-dinner-save-handler:2e          "NerdDinner.MessageH…"      14 hours ago   Up 14 hours                                                          ch06-docker-compose_nerd-dinner-save-handler_1
36f39baf60da   dockeronwindows/ch05-nerd-dinner-api:2e                   "dotnet NerdDinner.D…"      14 hours ago   Up 14 hours             80/tcp                                       ch06-docker-compose_nerd-dinner-api_1
8dc122d1cd24   dockeronwindows/ch05-nerd-dinner-web:2e                   "powershell powershe…"      14 hours ago   Up 14 hours (healthy)   80/tcp                                       ch06-docker-compose_nerd-dinner-web_1
c099a402373c   dockeronwindows/ch05-nerd-dinner-index-handler:2e         "dotnet NerdDinner.M…"      14 hours ago   Up 14 hours                                                          ch06-docker-compose_nerd-dinner-index-handler_1
1e455b6a1398   dockeronwindows/ch05-nats:2e                              "gnatsd -c gnatsd.co…"      14 hours ago   Up 14 hours             4222/tcp, 6222/tcp, 8222/tcp                 ch06-docker-compose_message-queue_1
784fedd0f424   dockeronwindows/ch03-nerd-dinner-db:2e                    "powershell -Command…"      14 hours ago   Up 14 hours                                                          ch06-docker-compose_nerd-dinner-db_1
2eaf1f1fabab   dockeronwindows/ch03-nerd-dinner-homepage:2e              "dotnet NerdDinner.H…"      14 hours ago   Up 14 hours             80/tcp                                       ch06-docker-compose_nerd-dinner-homepage_1

******* kwee1: reverse-proxy has problems
docker container logs --details -n 1 ch06-docker-compose_reverse-proxy_1
 time="2020-12-31T13:50:00-08:00" 
 level=error 
 msg="Provider connection error Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/version: open //./pipe/docker_engine: message readmode pipes not supported
    In the default daemon configuration on Windows, the docker client must be run elevated to connect. 
    This error may also indicate that the docker daemon is not running.
     
github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).doRequest
\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:182
github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).sendRequest
\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:122
github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).get
\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:37
github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).ServerVersion
\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/version.go:12
github.com/containous/traefik/provider/docker.(*Provider).Provide.func1.1
\t/go/src/github.com/containous/traefik/provider/docker/docker.go:137
github.com/containous/traefik/safe.OperationWithRecover.func1
\t/go/src/github.com/containous/traefik/safe/routine.go:160
github.com/containous/traefik/vendor/github.com/cenk/backoff.RetryNotify
\t/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37
github.com/containous/traefik/provider/docker.(*Provider).Provide.func1
\t/go/src/github.com/containous/traefik/provider/docker/docker.go:252
github.com/containous/traefik/safe.(*Pool).GoCtx.func1
\t/go/src/github.com/containous/traefik/safe/routine.go:62
github.com/containous/traefik/safe.GoWithRecover.func1
\t/go/src/github.com/containous/traefik/safe/routine.go:142
runtime.goexit
\t/usr/local/go/src/runtime/asm_amd64.s:1333
error during connect
github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).doRequest
\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:185
github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).sendRequest
\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:122
github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).get
\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:37
github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).ServerVersion
\t/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/version.go:12
github.com/containous/traefik/provider/docker.(*Provider).Provide.func1.1
\t/go/src/github.com/containous/traefik/provider/docker/docker.go:137
github.com/containous/traefik/safe.OperationWithRecover.func1
\t/go/src/github.com/containous/traefik/safe/routine.go:160
github.com/containous/traefik/vendor/github.com/cenk/backoff.RetryNotify
\t/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37
github.com/containous/traefik/provider/docker.(*Provider).Provide.func1
\t/go/src/github.com/containous/traefik/provider/docker/docker.go:252
github.com/containous/traefik/safe.(*Pool).GoCtx.func1
\t/go/src/github.com/containous/traefik/safe/routine.go:62
github.com/containous/traefik/safe.GoWithRecover.func1
\t/go/src/github.com/containous/traefik/safe/routine.go:142
runtime.goexit
\t/usr/local/go/src/runtime/asm_amd64.s:1333, retrying in 18.717482427s"
****** DONE segue: using Github closed pull requests to check state of Dockerfile
       CLOSED: [2020-12-31 Thu 16:46]
        - State "DONE"       from              [2020-12-31 Thu 16:46]
Tracked back why the ch03 db Dockerfile was incorrect because the fix was located in the pull request
https://github.com/sixeyed/docker-on-windows/pull/2
Turns out my Git repo was cloned from PackIt and not from sixeyed and it was never updated.
****** air
******* docker container ls
c:\cprojects\github>docker container ls
docker container ls
CONTAINER ID   IMAGE                                                     COMMAND                     CREATED        STATUS                  PORTS                          NAMES
3d9f793fbd3b   sixeyed/kibana:5.6.11-windowsservercore-ltsc2019          "powershell ./init.p…"      25 hours ago   Up 25 hours (healthy)   5601/tcp                       ch06-docker-compose_kibana_1
b2d209c0ea84   sixeyed/elasticsearch:5.6.11-windowsservercore-ltsc2019   "cmd /S /C \".\\bin\\el…"   25 hours ago   Up 25 hours (healthy)   9200/tcp, 9300/tcp             ch06-docker-compose_elasticsearch_1
<missing traefik>
3986728b259f   dockeronwindows/ch05-nerd-dinner-save-handler:2e          "NerdDinner.MessageH…"      25 hours ago   Up 25 hours                                            ch06-docker-compose_nerd-dinner-save-handler_1
989415f51243   dockeronwindows/ch05-nerd-dinner-api:2e                   "dotnet NerdDinner.D…"      25 hours ago   Up 25 hours             80/tcp                         ch06-docker-compose_nerd-dinner-api_1
5639f045ae0d   dockeronwindows/ch05-nerd-dinner-web:2e                   "powershell powershe…"      25 hours ago   Up 25 hours (healthy)   80/tcp                         ch06-docker-compose_nerd-dinner-web_1
4c5b931c4f5e   dockeronwindows/ch05-nerd-dinner-index-handler:2e         "dotnet NerdDinner.M…"      25 hours ago   Up 25 hours                                            ch06-docker-compose_nerd-dinner-index-handler_1
c3c8f3567320   dockeronwindows/ch05-nats:2e                              "gnatsd -c gnatsd.co…"      25 hours ago   Up 25 hours             4222/tcp, 6222/tcp, 8222/tcp   ch06-docker-compose_message-queue_1
171f9889e8e9   dockeronwindows/ch03-nerd-dinner-db:2e                    "powershell -Command…"      25 hours ago   Up 25 hours                                            ch06-docker-compose_nerd-dinner-db_1
948e8ff14c31   dockeronwindows/ch03-nerd-dinner-homepage:2e              "dotnet NerdDinner.H…"      25 hours ago   Up 25 hours             80/tcp                         ch06-docker-compose_nerd-dinner-homepage_1

**** ch7  Orchestrating Distributed Solutions with Docker Swarm
***** Creating a swarm and managing nodes
***** Creating and managing services in swarm mode
****** Running services across many containers
****** Global services
***** Deploying stacks to Docker swarm
****** Docker secrets
****** Defining a stack using Compose files
****** Deploying a stack from a Compose file
***** Running Docker swarm in the cloud
****** Managed Docker services in the cloud
******* Docker on Amazon Elastic Container Service
******* Docker on Google Container Platform
******* Docker on Azure Container Service
****** Docker cloud editions
***** Deploying updates with zero downtime
****** Load balancing across swarm nodes
****** Updating application services
****** Rolling back service updates
****** Configuring update behavior
****** Updating swarm nodes
****** Mixing hosts in hybrid swarms
***** Summary
*** section 3 : preparing for docker in production
**** ch8  Administering and Monitoring Dockerized Solutions
***** Managing containers with Windows tools
****** IIS Manager
****** SQL Server Management Studio
****** Event logs
****** Server Manager
***** Managing containers with Docker tools
****** Docker visualizer
****** Portainer
***** CaaS with Docker EE
****** Understanding UCP
****** Navigating the UCP UI
****** Managing nodes
****** Volumes
****** Images
****** Networks
****** Deploying stacks
****** Creating services
****** Monitoring services
****** RBAC
***** Summary
**** ch9  Understanding the Security Risks and Benefits of Docker
***** Understanding container security
****** Container processes
****** Container user accounts and ACLs
****** Running containers with resource constraints
****** Running containers with restricted capabilities
****** Isolation in Hyper-V containers
***** Securing applications with secure Docker images
****** Building minimal images
****** Docker Security Scanning
****** Managing Windows updates
***** Securing the software supply chain with DTR
****** Repositories and users
****** Organizations and teams
****** Image Signing and Content Trust
****** Golden images
***** Understanding security in swarm mode
****** Nodes and join tokens
****** Encryption and secrets
****** Node labels and external access
***** Summary
**** ch10  Powering a Continuous Deployment Pipeline with Docker
***** Designing CI/CD with Docker
***** Running shared development services in Docker
****** Packaging a Git server into a Windows Docker image
****** Running the Bonobo Git server in Docker
****** Packaging a CI server into a Windows Docker image
****** Running the Jenkins automation server in Docker
***** Configuring CI/CD using Jenkins in Docker
****** Setting up Jenkins credentials
****** Configuring the Jenkins CI job
****** Building the solution using Docker Compose in Jenkins
****** Multi-stage builds in CI pipelines
****** Running and verifying the solution
****** Running end-to-end tests in Docker
****** Tagging and pushing Docker images in Jenkins
***** Deploying to a remote Docker swarm using Jenkins
***** Summary

*** section 4 : getting started on your container journey
**** ch11 Debugging and Instrumenting Application Containers
***** Working with Docker in integrated development environments
****** Docker in Visual Studio 2017
******* Debugging with Docker Compose in Visual Studio 2017
****** Docker in Visual Studio 2015
****** Docker in Visual Studio Code
***** Instrumentation in Dockerized applications
****** Instrumentation with Prometheus
******* Adding a Prometheus endpoint to .NET projects
****** Adding a Prometheus exporter alongside existing apps
****** Running a Prometheus server in a Windows Docker container
***** The bug fixing workflow in Docker
****** Bug fixing before Docker
****** Bug fixing with Docker
***** Summary
**** ch12 Containerize What You Know - Guidance for Implementing Docker
***** Dockerizing what you know
&****** Selecting a simple Proof-of-Concept app
****** Generating an initial Dockerfile with Image2Docker
****** Engaging other stakeholders
***** Case studies for implementing Docker
****** Case study 1 - an in-house WebForms app
****** Case study 2 - a database integration service
****** Case study 3 - an Azure IoT app
***** Summary

**** other books you may enjoy
** kwee1
*** ch03
**** log-watcher
docker container run -d -P --name log-watcher dockeronwindows/ch03-iis-log-watcher:2e
docker port log-watcher // get ports
localhost::<port>
docker logs log-watcher // to see the logs
**** aspnet-config-default
docker container run -d -P --name aspnet-config-default dockeronwindows/ch03-aspnet-config:2e
docker port aspnet-config-default
localhost:<port> // shows App Settings and Connection Strings
**** iis-env
docker container run -d -P --name iis-env dockeronwindows/ch03-iis-environment-variables:2e
docker port iis-env 
localhost:<port> // shows Machine and Process level EVs
**** healthcheck
docker container run -d -P --name healthcheck dockeronwindows/ch03-iis-healthcheck:2e
docker container port healthcheck 
localhost:<port>/diagnostics
docker container ls // shows status as (healthy or unhealthy)
**** nerd-dinner-db
mkdir -p d:\databases\nd
docker container run -d -p 1433:1433 --name nerd-dinner-db -v d:\databases\nd:c:\data dockeronwindows/ch03-nerd-dinner-db:2e

sqlectron to connect to nerd-dinner-db with 'sa' and password
 See Step 10/17 : ENV SA_PASSWORD="N3rdD!Nne720^6"     HOMEPAGE_URL=""
**** x nerd-dinner-web
docker container run -d -P --name nerd-dinner-web dockeronwindows/ch03-nerd-dinner-web:2e
docker port nerd-dinner-web 
localhost:<port> // shows nerddinner homepage
   register new user: elton p:eltonelton
   check in sqlelectron that UserProfile table contains elton user
**** nerd-dinner-web + nerd-dinner-homepage
docker container run -d -P --name nerd-dinner-homepage dockeronwindows/ch03-nerd-dinner-homepage:2e
docker port nerd-dinner-homepage
localhost:<homepage-port> // nerd dinner home page comes up
                          // "find" goes to localhost:<homepage-port>/home/find which does not work

// This is not needed $Env:HOMEPAGE_URL= "http://localhost:<homepage-port>"
docker container stop nerd-dinner-web
docker container run -d -P --name nerd-dinner-web dockeronwindows/ch03-nerd-dinner-web:v2
docker port nerd-dinner-web //
localhost:<dinner-web-port> shows the basic homepage
Click Find Dinner shows localhost:<dinner-web-port>/home/find


There appears to be 2 env variables that :
HOMEPAGE_URL http://nerd-dinner-homepage
NERD_DINNER_URL /home/find
*** ch05
**** START [[https://github.com/sixeyed/docker-on-windows/issues/17][github issue: ch05 reverse-proxy has problems]]

     - State "START"      from              [2021-01-17 Sun 15:17]
Thank you for an excellent book. I have been reading and following through your examples and through the
standardization that Docker provides, the examples still run as expected.

However, in Ch5, when I run ch05-run-nerd-dinner_part-2.ps1 ( after part-1 ), I noticed that while the reverse-proxy service does run, the transcript indicates some errors.
Log:
1 > time="2021-01-16T18:11:08-08:00" level=error msg="Failed to retrieve information of the docker client and server host: error during connect: Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/version: open //./pipe/docker_engine: message readmode pipes not supported In the default daemon configuration on Windows, the docker client must be run elevated to connect. This error may also indicate that the docker daemon is not running."
2 > time="2021-01-16T18:11:08-08:00" level=error msg="Provider connection error Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/version: open //./pipe/docker_engine: message readmode pipes not supported In the default daemon configuration on Windows, the docker client must be run elevated to connect. This error may also indicate that the docker daemon is not running.
>
> github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).doRequest
> 	/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:182
> github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).sendRequest
> 	/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:122
> github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).get
> 	/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:37
> github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).ServerVersion
> 	/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/version.go:12
> github.com/containous/traefik/provider/docker.(*Provider).Provide.func1.1
> 	/go/src/github.com/containous/traefik/provider/docker/docker.go:137
> github.com/containous/traefik/safe.OperationWithRecover.func1
> 	/go/src/github.com/containous/traefik/safe/routine.go:160
> github.com/containous/traefik/vendor/github.com/cenk/backoff.RetryNotify
> 	/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37
> github.com/containous/traefik/provider/docker.(*Provider).Provide.func1
> 	/go/src/github.com/containous/traefik/provider/docker/docker.go:252
> github.com/containous/traefik/safe.(*Pool).GoCtx.func1
> 	/go/src/github.com/containous/traefik/safe/routine.go:62
> github.com/containous/traefik/safe.GoWithRecover.func1
> 	/go/src/github.com/containous/traefik/safe/routine.go:142
> runtime.goexit
> 	/usr/local/go/src/runtime/asm_amd64.s:1333
> error during connect
> github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).doRequest
> 	/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:185
> github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).sendRequest
> 	/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:122
> github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).get
> 	/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/request.go:37
> github.com/containous/traefik/vendor/github.com/docker/docker/client.(*Client).ServerVersion
> 	/go/src/github.com/containous/traefik/vendor/github.com/docker/docker/client/version.go:12
> github.com/containous/traefik/provider/docker.(*Provider).Provide.func1.1
> 	/go/src/github.com/containous/traefik/provider/docker/docker.go:137
> github.com/containous/traefik/safe.OperationWithRecover.func1
> 	/go/src/github.com/containous/traefik/safe/routine.go:160
> github.com/containous/traefik/vendor/github.com/cenk/backoff.RetryNotify
> 	/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37
> github.com/containous/traefik/provider/docker.(*Provider).Provide.func1
> 	/go/src/github.com/containous/traefik/provider/docker/docker.go:252
> github.com/containous/traefik/safe.(*Pool).GoCtx.func1
> 	/go/src/github.com/containous/traefik/safe/routine.go:62
> github.com/containous/traefik/safe.GoWithRecover.func1
> 	/go/src/github.com/containous/traefik/safe/routine.go:142
> runtime.goexit
> 	/usr/local/go/src/runtime/asm_amd64.s:1333, retrying in 369.950822ms"
> 

Here is my Docker environment :
   Powershell : run as an Administrator, with ExecutionPolicy = RemoteSigned, All.
   PC: Windows 10, 2004
   Docker Desktop: 3.0.4
   Docker Engine: 20.10.2


Tried the following 

1. Added --isolation hyperv option to Docker run did not work
   Based on https://github.com/StefanScherer/dockerfiles-windows/issues/383

2.Substitute sixeyed/traefik:v1.7.8-windowsservercore-ltsc2019 for a newer Traefix traefik:v2.3.7-windowsservercore-1809 failed with error : 
   > 2021/01/16 21:13:12 command traefik error: failed to decode configuration from flags: field not found, node: docker
   This tells me that I should look at the Dockerfile for sixeyed/traefik:v1.7.8-windowsservercore-ltsc2019 to find out how the --docker flag should be handled.
   Unfortunately it is a container, not an image and does not have the Dockerfile available.

Hopefully, you can provide some guidance to get your example working again.

Thanks,
** traefik
*** initial
traefik.io
  Website is Linux centric, does not even mentions Windows

products:
  traefik proxy
  traefik mesh
  traefik enterprise
  traefik pilot

This book uses MacOs but there is no source code to download.
So I expect a Windows version can work.

apress: https://www.apress.com/us/book/9781484263754
*** linux docker-compose.yml

version: '3'

services:
  reverse-proxy:
    # The official v2 Traefik docker image
    image: traefik:v2.3
    # Enables the web UI and tells Traefik to listen to docker
    command: --api.insecure=true --providers.docker
    ports:
      # The HTTP port
      - "80:80"
      # The Web UI (enabled by --api.insecure=true)
      - "8080:8080"
    volumes:
      # So that Traefik can listen to the Docker events
      - /var/run/docker.sock:/var/run/docker.sock

  whoami:
    # A container that exposes an API to show its IP address
    image: traefik/whoami
    labels:
      - "traefik.http.routers.whoami.rule=Host(`whoami.docker.localhost`)"
*** windows docker-compose.yml      
version: '3'
services:
traefik:
image: traefik
command: --api.insecure=true --providers.docker --providers.docker.endpoint=npipe:////./pipe/docker_engine
ports:
- "8080:8080" # Please read: https://docs.traefik.io/configuration/api/#security
- "443:443"
- "80:80"
isolation: process # workaround for https://github.com/containous/traefik/issues/4409 4
volumes:
- type: npipe
source: \.\pipe\docker_engine
target: \.\pipe\docker_engine

whoami1:
image: stefanscherer/whoami
labels:
- "traefik.http.routers.whoami1.rule=Host(whoami1.docker.localhost)"

whoami2:
image: stefanscherer/whoami
labels:
- "traefik.http.routers.whoami2.rule=Host(whoami2.docker.localhost)"

*** running
docker-compose up -d reverse-proxy
docker-compose up -d whoami
docker-compoese -f <composefile> up -d <service>
docker-compose -f simple.lin.dc.yml up -d traefik

air: switching to linux does not seem to work
     desktop appears ready but the system app is stuck at switching, then still shows "switch to linux containers"

**** PS C:\cprojects\pp\virtualization\docker\docker-on-windows.khtan\traefik> docker-compose -f simple.lin.dc.yml up -d traefik
DEBUG:    1+  >>>> docker-compose -f simple.lin.dc.yml up -d traefik
DEBUG:     ! CALL function '<ScriptBlock>'
Creating network "traefik_default" with the default driver
Pulling traefik (traefik:v2.3)...
v2.3: Pulling from library/traefik
0a6724ff3fcd: Pull complete
64d0c2f48fed: Pull complete
00390834f324: Pull complete
059f159f3940: Pull complete
Digest: sha256:0181e35c5af98f7f30fb391f91a6dbd281a90d7cf971e9909e26afd4ea923251
Status: Downloaded newer image for traefik:v2.3
Creating traefik_traefik_1 ... error

ERROR: for traefik_traefik_1  Cannot start service traefik: Ports are not available: listen tcp 0.0.0.0:8080: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.
ERROR: for traefik  Cannot start service traefik: Ports are not available: listen tcp 0.0.0.0:8080: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.
ERROR: Encountered errors while bringing up the project.

***** [[https://help.socketlabs.com/docs/how-to-fix-error-only-one-usage-of-each-socket-address-protocolnetwork-addressport-is-normally-permitted][how to fix: only one usage of each socket address]]
One of the ways is to increase the dynamic port range. The max by default is 5000. You can set this up to 65534. HKLM\System\CurrentControl\SetServices\Tcpip\Parameters\MaxUserPort is the
key to use.

The second thing you can do is, once the connection does get into an TIME_WAIT state, you can reduce the time it is in that state. Default is 4 minutes, but you can set this to 30 seconds.
HKLM\System\CurrentControlSet\Services\Tcpip\Parameters\TCPTimedWaitDelay is the key to use.

After these changes are made the system must be restarted.

\\air already has these settings

***** check who is holding :8080
air: 
netstat -aof | findstr :8080
shows pid 7264
procexp shows 7264 is chrome on windows
stopped chrome on win10

Still same error, showing somehow linux side is still holding :8080.

kwee1: 

*** docker container stop $(docker container list -q)
** mixing windows and linux containers with docker compose 03/21/2019
*** https://devblogs.microsoft.com/premier-developer/mixing-windows-and-linux-containers-with-docker-compose/
[[https://github.com/RandyPatterson/DockerComposeMultiPlatform][github]]

platform configuration was added to Docker Compose in 2.4 and removed in 3.x
docker desktop : 2.0.0.2 has section to turn on Experimental
 vs 3.1.0 Experimental looks different 

In Docker Desktop, under Windows, enter the Docker Engine configuration with "experimental": true.
Able to 
docker container run --name whalesaylin  --platform=linux docker/whalesay cowsay moo
   but failed to shutdown container error
***** linux
  docker image build -t apitier:linux apitier
  docker run apitier
*****   win
  docker image build -t webtier:win webtier
  docker run webtier

*** c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>docker image build -t apitier:linux apitier
 Sending build context to Docker daemon  4.028MB
 Step 1/13 : FROM microsoft/dotnet:2.1-aspnetcore-runtime AS base
 2.1-aspnetcore-runtime: Pulling from microsoft/dotnet
 9334511b2b1d: Pull complete
 edbe6aae2e0e: Pull complete
 77eb333f05cd: Pull complete
 ea739468fddc: Pull complete
 31d19bab185a: Pull complete
 162d668abe7f: Pull complete
 Digest: sha256:c6abe7059b096c890700ae3a31f4452dc27ee4135c82040ec14ecfc233a35d7b
 Status: Downloaded newer image for microsoft/dotnet:2.1-aspnetcore-runtime
  ---> 9a9d1dbe76dc
 Step 2/13 : WORKDIR /app
  ---> Running in 4226f6de0fd3
 Removing intermediate container 4226f6de0fd3
  ---> 274ca6b7112b
 Step 3/13 : EXPOSE 80
  ---> Running in eabe8280a974
 Removing intermediate container eabe8280a974
  ---> 1fcb7b643fb3
 Step 4/13 : FROM microsoft/dotnet:2.1-sdk AS build
 2.1-sdk: Pulling from microsoft/dotnet
 9334511b2b1d: Already exists
 4736d12bef22: Pull complete
 3252e0d93d7c: Pull complete
 3a86ee343217: Pull complete
 71c443a95ab6: Pull complete
 6548a03b6dea: Pull complete
 9024f5c5c2e6: Pull complete
 Digest: sha256:8bb207493e4e79ad5a7ed5f3c834f4792d6013100f89889126344c3543d98584
 Status: Downloaded newer image for microsoft/dotnet:2.1-sdk
  ---> a561ed1ed9d3
 Step 5/13 : WORKDIR "/src/ApiTier"
  ---> Running in 54c17e13d86d
 Removing intermediate container 54c17e13d86d
  ---> e404e3971bb2
 Step 6/13 : COPY . .
  ---> 003d1252d3e3
 Step 7/13 : RUN dotnet build "WebApi.csproj" -c Release -o /app
 d9e8b01179bf: Downloading [======>                                            ]  205.3MB/1.66GB
 3eb83143ff4b: Downloading [===========>                                       ]  159.7MB/696.1MB
 Copyright (C) Microsoft Corporation. All rights reserved.
 23422103fdff: Downloading [=================================>                 ]    249MB/366.6MB
 3eb83143ff4b: Downloading [==========>                                        ]  152.7MB/696.1MB
   WebApi -> C:\app\WebApi.dll
 23422103fdff: Downloading [=================================>                 ]  247.4MB/366.6MB
 3eb83143ff4b: Downloading [==========>                                        ]  151.6MB/696.1MB
 Build succeeded.
     0 Warning(s)
 d9e8b01179bf: Downloading [======>                                            ]  209.1MB/1.66GB
 3eb83143ff4b: Downloading [===========>                                       ]  163.6MB/696.1MB
 d9e8b01179bf: Downloading [=====>                                             ]  197.1MB/1.66GB
 23422103fdff: Downloading [==================================>                ]  251.7MB/366.6MB
  ---> 90f0122cb121
 23422103fdff: Downloading [=================================>                 ]  246.9MB/366.6MB
  ---> 90f0122cb121
 Step 9/13 : RUN dotnet publish "WebApi.csproj" -c Release -o /app
  ---> Running in 0980a9f014e6
 Microsoft (R) Build Engine version 16.2.37902+b5aaefc9f for .NET Core
 Copyright (C) Microsoft Corporation. All rights reserved.
 d9e8b01179bf: Downloading [=====>                                             ]  193.9MB/1.66GB
 d9e8b01179bf: Downloading [======>                                            ]  209.6MB/1.66GB
   WebApi -> C:\src\ApiTier\bin\Release\netcoreapp2.1\WebApi.dll
 23422103fdff: Downloading [=================================>                 ]  246.3MB/366.6MB
 d9e8b01179bf: Downloading [======>                                            ]  211.8MB/1.66GB
 3eb83143ff4b: Downloading [===========>                                       ]  165.2MB/696.1MB
 d9e8b01179bf: Downloading [=====>                                             ]  192.8MB/1.66GB
 23422103fdff: Downloading [==================================>                ]  254.4MB/366.6MB
  ---> 1fcb7b643fb3
 Step 11/13 : WORKDIR /app
 d9e8b01179bf: Downloading [======>                                            ]  212.9MB/1.66GB
 3eb83143ff4b: Downloading [===========>                                       ]  166.3MB/696.1MB
 23422103fdff: Downloading [==================================>                ]  254.9MB/366.6MB
 23422103fdff: Downloading [==================================>                ]    256MB/366.6MB
  ---> 061355e4aca8
 23422103fdff: Downloading [=================================>                 ]  245.8MB/366.6MB
 3eb83143ff4b: Downloading [==========>                                        ]  145.7MB/696.1MB
 Removing intermediate container f33c547c91e6
 d9e8b01179bf: Downloading [=====>                                             ]  190.6MB/1.66GB
 3eb83143ff4b: Downloading [==========>                                        ]  145.2MB/696.1MB
 Successfully tagged apitier:linux
 23422103fdff: Downloading [=================================>                 ]  245.3MB/366.6MB
 3eb83143ff4b: Downloading [==========>                                        ]  140.3MB/696.1MB
*** c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>docker image build -t webtier:win webtier
 Sending build context to Docker daemon  12.58MB
 d9e8b01179bf: Downloading [======>                                            ]  213.4MB/1.66GB
 4.7.2-windowsservercore-1803: Pulling from microsoft/aspnet
 23422103fdff: Downloading [===================================>               ]  257.1MB/366.6MB
 3eb83143ff4b: Downloading [==========>                                        ]  139.7MB/696.1MB
 97c1d214c388: Download complete
 23422103fdff: Downloading [===============================>                   ]  232.4MB/366.6MB
 7b0dda834947: Waiting
 2666f9a29637: Waiting
 3dc5f513377c: Waiting
 7decfc07bba1: Waiting
 2149ff53a2ba: Waiting
 43a2736b76cc: Waiting



 d9e8b01179bf: Pull complete
 3eb83143ff4b: Pull complete
 97c1d214c388: Pull complete
 23422103fdff: Pull complete
 7b0dda834947: Pull complete
 2666f9a29637: Pull complete
 3dc5f513377c: Pull complete
 7decfc07bba1: Pull complete
 2149ff53a2ba: Pull complete
 43a2736b76cc: Pull complete
 Digest: sha256:a55aebebbbc4a56f6342e8f5e6eabc0ef0112de3c1b0cdae93739f7f894b0f5d
 Status: Downloaded newer image for microsoft/aspnet:4.7.2-windowsservercore-1803
  ---> a3488807da11
 Step 2/3 : WORKDIR /inetpub/wwwroot
  ---> Running in 093d95690d37
 Removing intermediate container 093d95690d37
  ---> 618afb857809
 Step 3/3 : COPY docker/ .
  ---> fcbd74c14564
 Successfully built fcbd74c14564
 Successfully tagged webtier:win

 c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>
 c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>
 c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>
 c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>docker-compose up -d
 Creating dockercomposemultiplatform_apitier_1 ... done
 Creating dockercomposemultiplatform_webtier_1 ... done

 c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>docker-compose ps
                 Name                             Command             State           Ports
 --------------------------------------------------------------------------------------------------
 dockercomposemultiplatform_apitier_1   dotnet WebApi.dll             Up      80/tcp
 dockercomposemultiplatform_webtier_1   C:\ServiceMonitor.exe w3svc   Up      0.0.0.0:20268->80/tcp
*** wsl2: docker image build -t apitier:linux apitier
[+] Building 10.1s (4/4) FINISHED
 => [internal] load build definition from Dockerfile                                                                                                                                        0.1s
 => => transferring dockerfile: 432B                                                                                                                                                        0.0s
 => [internal] load .dockerignore                                                                                                                                                           0.1s
 => => transferring context: 2B                                                                                                                                                             0.0s
 => ERROR [internal] load metadata for docker.io/microsoft/dotnet:2.1-sdk                                                                                                                  10.0s
 => ERROR [internal] load metadata for docker.io/microsoft/dotnet:2.1-aspnetcore-runtime                                                                                                   10.0s
------
 > [internal] load metadata for docker.io/microsoft/dotnet:2.1-sdk:
------
------
 > [internal] load metadata for docker.io/microsoft/dotnet:2.1-aspnetcore-runtime:
------
failed to solve with frontend dockerfile.v0: failed to create LLB definition: failed to do request: Head https://registry-1.docker.io/v2/microsoft/dotnet/manifests/2.1-aspnetcore-runtime: dial tcp: lookup registry-1.docker.io on 192.168.65.1:53: read udp 192.168.65.3:33008->192.168.65.1:53: i/o timeout
*** docker 2.0.0.2
**** first attemp failed
 Step 10/13 : FROM base AS final
  ---> 98bce6d71e2a
 Step 11/13 : WORKDIR /app
  ---> Using cache
  ---> 43d5b2dc8250
 Step 12/13 : COPY --from=publish /app .
 ERROR: Service 'apitier' failed to build: failed to copy files: failed to copy directory: failed to extract archive to /tmp/897ebc71287676bdef4a15e74cc05c575509adde9adf9bfb8c1d58909c2cf191-mount/app: process 372 in container 897ebc71287676bdef4a15e74cc05c575509adde9adf9bfb8c1d58909c2cf191_svm encountered an error during CloseStdin: failure in a Windows system call: The process has already exited. (0x8037011f)
**** switched to linux, then back to windows
***** docker-compose working but localhost:7274 did not produce the ids
***** c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>docker-compose up -d
 Building apitier
 Step 1/13 : FROM microsoft/dotnet:2.1-aspnetcore-runtime AS base
  ---> 7685a653f837
 Step 2/13 : WORKDIR /app
  ---> Using cache
  ---> bbe973bd5d67
 Step 3/13 : EXPOSE 80
  ---> Using cache
  ---> 98bce6d71e2a

 Step 4/13 : FROM microsoft/dotnet:2.1-sdk AS build
  ---> 69d571ddbbec
 Step 5/13 : WORKDIR "/src/ApiTier"
  ---> Using cache
  ---> 801e5ba45ea7
 Step 6/13 : COPY . .
  ---> Using cache
  ---> d87249084c3d
 Step 7/13 : RUN dotnet build "WebApi.csproj" -c Release -o /app
  ---> Using cache
  ---> ce8ca5b0a5c6

 Step 8/13 : FROM build AS publish
  ---> ce8ca5b0a5c6
 Step 9/13 : RUN dotnet publish "WebApi.csproj" -c Release -o /app
  ---> Using cache
  ---> 4ba7c4b07a44

 Step 10/13 : FROM base AS final
  ---> 98bce6d71e2a
 Step 11/13 : WORKDIR /app
  ---> Using cache
  ---> 43d5b2dc8250
 Step 12/13 : COPY --from=publish /app .
  ---> b948ec8f1e0e
 Step 13/13 : ENTRYPOINT ["dotnet", "WebApi.dll"]
  ---> Running in 31d841f5c5ea
 Removing intermediate container 31d841f5c5ea
  ---> b5a12b85cc08

 Successfully built b5a12b85cc08
 Successfully tagged apitier:linux
 WARNING: Image for service apitier was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
 Building webtier
 Step 1/3 : FROM microsoft/aspnet:4.7.2-windowsservercore-1803
 4.7.2-windowsservercore-1803: Pulling from microsoft/aspnet
 d9e8b01179bf: Pull complete
 3eb83143ff4b: Pull complete
 97c1d214c388: Pull complete
 23422103fdff: Pull complete
 7b0dda834947: Pull complete
 2666f9a29637: Pull complete
 3dc5f513377c: Pull complete
 7decfc07bba1: Pull complete
 2149ff53a2ba: Pull complete
 43a2736b76cc: Pull complete
 Digest: sha256:a55aebebbbc4a56f6342e8f5e6eabc0ef0112de3c1b0cdae93739f7f894b0f5d
 Status: Downloaded newer image for microsoft/aspnet:4.7.2-windowsservercore-1803
  ---> a3488807da11
 Step 2/3 : WORKDIR /inetpub/wwwroot
  ---> Running in 48df7f2594d1
 Removing intermediate container 48df7f2594d1
  ---> 8e5e790e0d42
 Step 3/3 : COPY docker/ .
  ---> 3a2d872f6609

 Successfully built 3a2d872f6609
 Successfully tagged webtier:win
 WARNING: Image for service webtier was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
 Creating dockercomposemultiplatform_apitier_1 ... done
 Creating dockercomposemultiplatform_webtier_1 ... done
*****  c:\cprojects\pp\virtualization\docker\DockerComposeMultiPlatform>docker-compose ps
 The system cannot find the path specified.
                 Name                             Command             State          Ports
 -------------------------------------------------------------------------------------------------
 dockercomposemultiplatform_apitier_1   dotnet WebApi.dll             Up      80/tcp
 dockercomposemultiplatform_webtier_1   C:\ServiceMonitor.exe w3svc   Up      0.0.0.0:7274->80/tcp

** [[https://www.paraesthesia.com/archive/2019/06/12/windows-and-linux-docker-containers-side-by-side/][win and lin docker side by side 06/12/2019]]
*** Docker Desktop 2.0.0.2
 docker version
 Client: Docker Engine - Community
  Version:           18.09.1
  API version:       1.39
  Go version:        go1.10.6
  Git commit:        4c52b90
  Built:             Wed Jan  9 19:34:26 2019
  OS/Arch:           windows/amd64
  Experimental:      false

 Server: Docker Engine - Community
  Engine:
   Version:          18.09.1
   API version:      1.39 (minimum version 1.24)
   Go version:       go1.10.6
   Git commit:       4c52b90
   Built:            Wed Jan  9 19:50:10 2019
   OS/Arch:          windows/amd64
   Experimental:     true

Does not work well

*** latest: currently Docker Desktop 3.1.0
 https://docs.docker.com/docker-for-windows/release-notes/ to download older versions of Docker Desktop

*** docker community 18.03.0
Does not support version in compose file?
Version 3.3 runs
Version 2.2 does not support "platform"

"platform" is added in 2.4, and removed with 3.x

docker-compose 1.20.1 does not support platform
docker-compose 1.21.0 first version to support platform
   file version 2.4



*** c:\cprojects\pp\virtualization\docker\docker-ci-zap>docker-ci-zap.exe -folder "d:\docker"
docker-ci-zap.exe -folder "d:\docker"
INFO: Zapped successfully

** checkpoint: 
This book is good but the docker desktop is out of date.
The key issues are :
1. traefik does not provide windows version for 2004, so author created his own image at sixeyed/traefik:v1.7.8-windowservercore-ltsc2019
   This does not run well for Win10 2004.
2. The use of docker-compose for orchestration is marred by inconsistent supported
   a. --platform was removed along the way so latest Docker Desktop 3.0.1 does not use it.
3. ch06 cannot be used because the 'platform' keyword is not supported in docker-compose 3.x format.
   Seeting the format to 2.4 still does not work.
4. The orchestration part of this book is therefore not going to work well.
5. Consider using kubernetes for orchestration then since docker-com


